{"id":"datastore\/query\/gqlquery","type":"","title":"Google\\Cloud\\Datastore\\Query\\GqlQuery","name":"GqlQuery","description":"<p>Query Google Cloud Datastore using <a href=\"https:\/\/cloud.google.com\/datastore\/docs\/apis\/gql\/gql_reference\">GQL<\/a>.<\/p>\n<p>By default, parameters MUST be bound using named or positional bindings.\nLiterals are disabled by default, and must be enabled by setting\n<code>$options['allowLiterals']<\/code> to <code>true<\/code>. As with any SQL dialect, using\nparameter binding is highly recommended.<\/p>\n<p>Idiomatic usage is via <a data-custom-type=\"cloud-datastore\/v1.12.0\/datastore\/datastoreclient\" data-method=\"gqlQuery\">Google\\Cloud\\Datastore\\DatastoreClient::gqlQuery()<\/a>.<\/p>\n<p>Implements <a href=\"http:\/\/php.net\/manual\/en\/class.jsonserializable.php\" target=\"_blank\">JsonSerializable<\/a><\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\Datastore\\DatastoreClient;\n\n$datastore = new DatastoreClient();\n\n$query = $datastore->gqlQuery('SELECT * FROM Companies');\n$res = $datastore->runQuery($query);\n\nforeach ($res as $company) {\n    echo $company['companyName'] . PHP_EOL;\n}"},{"caption":"<p>Literals must be provided as bound parameters by default:<\/p>","code":"$query = $datastore->gqlQuery('SELECT * FROM Companies WHERE companyName = @companyName', [\n    'bindings' => [\n        'companyName' => 'Google'\n    ]\n]);"},{"caption":"<p>Positional binding is also supported:<\/p>","code":"$query = $datastore->gqlQuery('SELECT * FROM Companies WHERE companyName = @1 LIMIT 1', [\n    'bindings' => [\n        'Google'\n    ]\n]);"},{"caption":"<p>While not recommended, you can use literals in your query string:<\/p>","code":"$query = $datastore->gqlQuery('SELECT * FROM Companies WHERE companyName = \\'Google\\'', [\n    'allowLiterals' => true\n]);"},{"caption":"<p>Using cursors as query bindings:<\/p>","code":"$cursor = $datastore->cursor($cursorValue);\n\n$query = $datastore->gqlQuery('SELECT * FROM Companies OFFSET @offset', [\n    'bindings' => [\n        'offset' => $cursor\n    ]\n]);"}],"resources":[{"title":"GQL Reference","link":"https:\/\/cloud.google.com\/datastore\/docs\/apis\/gql\/gql_reference"}],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"Datastore\/src\/Query\/GqlQuery.php#L140","description":"","examples":[],"resources":[],"params":[{"name":"entityMapper","description":"<p>An instance of EntityMapper<\/p>","types":["<a data-custom-type=\"cloud-datastore\/v1.12.0\/datastore\/entitymapper\">Google\\Cloud\\Datastore\\EntityMapper<\/a>"],"optional":false,"nullable":null},{"name":"query","description":"<p>The GQL Query string.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.allowLiterals","description":"<p>Whether literal values will be allowed in the query string. Parameter binding is strongly encouraged over literals. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.bindings","description":"<p>An array of values to bind to the query string. Queries using Named Bindings should provide a key\/value set, while queries using Positional Bindings must provide a simple array. Applications with no need for multitenancy should not set this value.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[]}]}