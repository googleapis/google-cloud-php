{"id":"datastore\/datastoreclient","type":"","title":"Google\\Cloud\\Datastore\\DatastoreClient","name":"DatastoreClient","description":"<p>Google Cloud Datastore is a highly-scalable NoSQL database for your\napplications. Find more information at the\n<a href=\"https:\/\/cloud.google.com\/datastore\/docs\/\">Google Cloud Datastore docs<\/a>.<\/p>\n<p>Cloud Datastore supports\n<a href=\"https:\/\/cloud.google.com\/datastore\/docs\/concepts\/multitenancy\">multi-tenant<\/a>\napplications through use of data partitions. A partition ID can be supplied\nwhen creating an instance of Cloud Datastore, and will be used in all\noperations executed in that instance.<\/p>\n<p>To enable the\n<a href=\"https:\/\/cloud.google.com\/datastore\/docs\/tools\/datastore-emulator\">Google Cloud Datastore Emulator<\/a>,\nset the\n<a href=\"https:\/\/cloud.google.com\/datastore\/docs\/tools\/datastore-emulator#setting_environment_variables\"><code>PUBSUB_EMULATOR_HOST<\/code><\/a>\nenvironment variable.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\Datastore\\DatastoreClient;\n\n$datastore = new DatastoreClient();"},{"caption":"<p>Multi-tenant applications can supply a namespace ID.<\/p>","code":"use Google\\Cloud\\Datastore\\DatastoreClient;\n\n$datastore = new DatastoreClient([\n    'namespaceId' => 'my-application-namespace'\n]);"},{"caption":"<p>Using the Datastore Emulator<\/p>","code":"use Google\\Cloud\\Datastore\\DatastoreClient;\n\n\/\/ Be sure to use the port specified when starting the emulator.\n\/\/ `8900` is used as an example only.\nputenv('DATASTORE_EMULATOR_HOST=http:\/\/localhost:8900');\n\n$datastore = new DatastoreClient();"}],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"DatastoreClient.php#L132","description":"<p>Create a Datastore client.<\/p>","examples":[],"resources":[],"params":[{"name":"config","description":"<p>Configuration Options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"config.projectId","description":"<p>The project ID from the Google Developer's Console.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"config.authCache","description":"<p>A cache for storing access tokens. <strong>Defaults to<\/strong> a simple in memory implementation.<\/p>","types":["CacheItemPoolInterface"],"optional":null,"nullable":null},{"name":"config.authCacheOptions","description":"<p>Cache configuration options.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"config.authHttpHandler","description":"<p>A handler used to deliver Psr7 requests specifically for authentication.<\/p>","types":["callable"],"optional":null,"nullable":null},{"name":"config.httpHandler","description":"<p>A handler used to deliver Psr7 requests. Only valid for requests sent over REST.<\/p>","types":["callable"],"optional":null,"nullable":null},{"name":"config.keyFile","description":"<p>The contents of the service account credentials .json file retrieved from the Google Developer's Console. Ex: <code>json_decode(file_get_contents($path), true)<\/code>.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"config.keyFilePath","description":"<p>The full path to your service account credentials .json file retrieved from the Google Developers Console.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"config.retries","description":"<p>Number of retries for a failed request. <strong>Defaults to<\/strong> <code>3<\/code>.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"config.scopes","description":"<p>Scopes to be used for the request.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"config.namespaceId","description":"<p>Partitions data under a namespace. Useful for <a href=\"https:\/\/cloud.google.com\/datastore\/docs\/concepts\/multitenancy\">Multitenant Projects<\/a>.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"config.returnInt64AsObject","description":"<p>If true, 64 bit integers will be returned as a <a data-custom-type=\"cloud-core\/master\/core\/int64\">Google\\Cloud\\Core\\Int64<\/a> object for 32 bit platform compatibility. <strong>Defaults to<\/strong> false.<\/p>","types":["bool"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[]},{"id":"key","type":"instance","name":"key","source":"DatastoreClient.php#L186","description":"<p>Create a single Key instance<\/p>","examples":[{"caption":"","code":"$key = $datastore->key('Person', 'Bob');"},{"caption":"<p>To override the internal detection of identifier type, you can specify which type to use.<\/p>","code":"$key = $datastore->key('Robots', '1337', [\n    'identifierType' => Key::TYPE_NAME\n]);"}],"resources":[{"title":"Key","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key"},{"title":"PathElement","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key#PathElement"}],"params":[{"name":"kind","description":"<p>The kind.<\/p>","types":["string"],"optional":false,"nullable":null},{"name":"identifier","description":"<p>The ID or name.<\/p>","types":["string","int"],"optional":true,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.identifierType","description":"<p>If omitted, type will be determined internally. In cases where any ambiguity can be expected (i.e. if you want to create keys with <code>name<\/code> but your values may pass PHP's <code>is_numeric()<\/code> check), this value may be explicitly set using <code>Key::TYPE_ID<\/code> or <code>Key::TYPE_NAME<\/code>.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>"],"description":""}]},{"id":"keys","type":"instance","name":"keys","source":"DatastoreClient.php#L234","description":"<p>Create multiple keys with the same configuration.<\/p>\n<p>When inserting multiple entities, creating a set of keys at once can be\nuseful. By defining the Key's kind and any ancestors up front, and\nallowing Cloud Datastore to allocate IDs, you can be sure that your\nentity identity and ancestry are correct and that there will be no\ncollisions during the insert operation.<\/p>","examples":[{"caption":"","code":"$keys = $datastore->keys('Person', [\n    'number' => 10\n]);"},{"caption":"<p>Ancestor paths can be specified<\/p>","code":"$keys = $datastore->keys('Person', [\n    'ancestors' => [\n        ['kind' => 'Person', 'name' => 'Grandpa Joe'],\n        ['kind' => 'Person', 'name' => 'Dad Mike']\n    ],\n    'number' => 3\n]);"}],"resources":[{"title":"Key","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key"},{"title":"PathElement","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key#PathElement"}],"params":[{"name":"kind","description":"<p>The kind to use in the final path element.<\/p>","types":["string"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.ancestors","description":"<p>An array of <a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key#PathElement\">PathElement<\/a> arrays. Use to create <a href=\"https:\/\/cloud.google.com\/datastore\/docs\/concepts\/entities#ancestor_paths\">ancestor paths<\/a>.<\/p>","types":["array[]"],"optional":null,"nullable":null},{"name":"options.number","description":"<p>The number of keys to generate.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.id","description":"<p>The ID for the last pathElement.<\/p>","types":["string","int"],"optional":null,"nullable":null},{"name":"options.name","description":"<p>The Name for the last pathElement.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/key[]\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"description":""}]},{"id":"entity","type":"instance","name":"entity","source":"DatastoreClient.php#L331","description":"<p>Create an entity.<\/p>\n<p>This method does not execute any service requests.<\/p>\n<p>Entities are created with a Datastore Key, or by specifying a Kind. Kinds\nare only allowed for insert operations. For any other case, you must\nspecify a named key. If a kind is given, an ID will be automatically\nallocated for the entity upon insert. Additionally, if your entity\nrequires a complex key elementPath, you must create the key separately.<\/p>\n<p>In complex applications you may want to create your own entity types.\nGoogle Cloud PHP supports subclassing of <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>.\nIf the name of a subclass of Entity is given in the options array, an\nentity will be created with that class rather than the default class.<\/p>","examples":[{"caption":"","code":"$key = $datastore->key('Person', 'Bob');\n$entity = $datastore->entity($key, [\n    'firstName' => 'Bob',\n    'lastName' => 'Testguy'\n]);"},{"caption":"<p>Entity values can be assigned and accessed via the array syntax.<\/p>","code":"$entity = $datastore->entity($key);\n\n$entity['firstName'] = 'Bob';\n$entity['lastName'] = 'Testguy';"},{"caption":"<p>Entity values can also be assigned and accessed via an object syntax.<\/p>","code":"$entity = $datastore->entity($key);\n\n$entity->firstName = 'Bob';\n$entity->lastName = 'Testguy';"},{"caption":"<p>Entities can be created with a Kind only, for inserting into datastore<\/p>","code":"$entity = $datastore->entity('Person');"},{"caption":"<p>Entities can be custom classes extending the built-in Entity class.<\/p>","code":"class Person extends Google\\Cloud\\Datastore\\Entity\n{}\n\n$person = $datastore->entity('Person', [ 'firstName' => 'Bob'], [\n    'className' => Person::class\n]);\n\necho get_class($person); \/\/ `Person`"},{"caption":"<p>If you wish to exclude certain properties from datastore indexes, property names may be supplied in the method $options:<\/p>","code":"$entity = $datastore->entity('Person', [\n    'firstName' => 'Bob',\n    'dateOfBirth' => new DateTime('January 31, 1969')\n], [\n    'excludeFromIndexes' => [\n        'dateOfBirth'\n    ]\n]);"}],"resources":[{"title":"Entity","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Entity"}],"params":[{"name":"key","description":"<p>The key used to identify the record, or a string $kind.<\/p>","types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>","string"],"optional":false,"nullable":null},{"name":"entity","description":"<p>The data to fill the entity with.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.className","description":"<p>The name of a class extending <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>. If provided, an instance of that class will be returned instead of Entity. If not set, <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a> will be used.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.excludeFromIndexes","description":"<p>A list of entity keys to exclude from datastore indexes.<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>"],"description":""}]},{"id":"geoPoint","type":"instance","name":"geoPoint","source":"DatastoreClient.php#L350","description":"<p>Create a new GeoPoint<\/p>","examples":[{"caption":"","code":"$geoPoint = $datastore->geoPoint(37.4220, -122.0841);"}],"resources":[{"title":"LatLng","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/Shared.Types\/LatLng"}],"params":[{"name":"latitude","description":"<p>The latitude<\/p>","types":["float"],"optional":false,"nullable":null},{"name":"longitude","description":"<p>The longitude<\/p>","types":["float"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/geopoint\">Google\\Cloud\\Datastore\\GeoPoint<\/a>"],"description":""}]},{"id":"blob","type":"instance","name":"blob","source":"DatastoreClient.php#L371","description":"<p>Create a new Blob<\/p>","examples":[{"caption":"","code":"$blob = $datastore->blob('hello world');"},{"caption":"<p>Blobs can be used to store binary data<\/p>","code":"$blob = $datastore->blob(file_get_contents(__DIR__ .'\/family-photo.jpg'));"}],"resources":[],"params":[{"name":"value","description":"","types":["string","resource","\\Psr\\Http\\Message\\StreamInterface"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/blob\">Google\\Cloud\\Datastore\\Blob<\/a>"],"description":""}]},{"id":"int64","type":"instance","name":"int64","source":"DatastoreClient.php#L388","description":"<p>Create an Int64 object. This can be used to work with 64 bit integers as\na string value while on a 32 bit platform.<\/p>","examples":[{"caption":"","code":"$int64 = $datastore->int64('9223372036854775807');"}],"resources":[],"params":[{"name":"value","description":"","types":["string"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"cloud-core\/master\/core\/int64\">Google\\Cloud\\Core\\Int64<\/a>"],"description":""}]},{"id":"allocateId","type":"instance","name":"allocateId","source":"DatastoreClient.php#L413","description":"<p>Allocates an available ID to a given incomplete key<\/p>\n<p>Key MUST be in an incomplete state (i.e. including a kind but not an ID\nor name in its final pathElement).<\/p>\n<p>This method will execute a service request.<\/p>","examples":[{"caption":"","code":"$key = $datastore->key('Person');\n$keyWithAllocatedId = $datastore->allocateId($key);"}],"resources":[{"title":"allocateIds","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/projects\/allocateIds"}],"params":[{"name":"key","description":"<p>The incomplete key.<\/p>","types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>"],"description":""}]},{"id":"allocateIds","type":"instance","name":"allocateIds","source":"DatastoreClient.php#L443","description":"<p>Allocate available IDs to a set of keys<\/p>\n<p>Keys MUST be in an incomplete state (i.e. including a kind but not an ID\nor name in their final pathElement).<\/p>\n<p>This method will execute a service request.<\/p>","examples":[{"caption":"","code":"$keys = [\n    $datastore->key('Person'),\n    $datastore->key('Person')\n];\n\n$keysWithAllocatedIds = $datastore->allocateIds($keys);"}],"resources":[{"title":"allocateIds","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/projects\/allocateIds"}],"params":[{"name":"keys","description":"<p>The incomplete keys.<\/p>","types":["<a data-custom-type=\"datastore\/key[]\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/key[]\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"description":""}]},{"id":"transaction","type":"instance","name":"transaction","source":"DatastoreClient.php#L461","description":"<p>Create a Transaction<\/p>","examples":[{"caption":"","code":"$transaction = $datastore->transaction();"}],"resources":[{"title":"Datastore Transactions","link":"https:\/\/cloud.google.com\/datastore\/docs\/concepts\/transactions"}],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/transaction\">Google\\Cloud\\Datastore\\Transaction<\/a>"],"description":""}]},{"id":"insert","type":"instance","name":"insert","source":"DatastoreClient.php#L495","description":"<p>Insert an entity<\/p>\n<p>An entity with incomplete keys will be allocated an ID prior to insertion.<\/p>\n<p>Insert by this method is non-transactional. If you need transaction\nsupport, use <a data-custom-type=\"datastore\/transaction\" data-method=\"insert\">Google\\Cloud\\Datastore\\Transaction::insert()<\/a>.<\/p>","examples":[{"caption":"","code":"$key = $datastore->key('Person', 'Bob');\n$entity = $datastore->entity($key, ['firstName' => 'Bob']);\n\n$datastore->insert($entity);"}],"resources":[],"params":[{"name":"entity","description":"<p>The entity to be inserted.<\/p>","types":["<a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[{"type":"\\DomainException","description":"If a conflict occurs, fail."}],"returns":[{"types":["string"],"description":"<p>The entity version.<\/p>"}]},{"id":"insertBatch","type":"instance","name":"insertBatch","source":"DatastoreClient.php#L524","description":"<p>Insert multiple entities<\/p>\n<p>Any entity with incomplete keys will be allocated an ID prior to insertion.<\/p>\n<p>Insert by this method is non-transactional. If you need transaction\nsupport, use <a data-custom-type=\"datastore\/transaction\" data-method=\"insertBatch\">Google\\Cloud\\Datastore\\Transaction::insertBatch()<\/a>.<\/p>","examples":[{"caption":"","code":"$entities = [\n    $datastore->entity('Person', ['firstName' => 'Bob']),\n    $datastore->entity('Person', ['firstName' => 'John'])\n];\n\n$datastore->insertBatch($entities);"}],"resources":[],"params":[{"name":"entities","description":"<p>The entities to be inserted.<\/p>","types":["<a data-custom-type=\"datastore\/entity[]\">Google\\Cloud\\Datastore\\Entity[]<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p><a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/projects\/commit#response-body\">Response Body<\/a><\/p>"}]},{"id":"update","type":"instance","name":"update","source":"DatastoreClient.php#L568","description":"<p>Update an entity<\/p>\n<p>Please note that updating a record in Cloud Datastore will replace the\nexisting record. Adding, editing or removing a single property is only\npossible by first retrieving the entire entity in its existing state.<\/p>\n<p>Update by this method is non-transactional. If you need transaction\nsupport, use <a data-custom-type=\"datastore\/transaction\" data-method=\"update\">Google\\Cloud\\Datastore\\Transaction::update()<\/a>.<\/p>","examples":[{"caption":"","code":"$entity['firstName'] = 'John';\n\n$datastore->update($entity);"}],"resources":[],"params":[{"name":"entity","description":"<p>The entity to be updated.<\/p>","types":["<a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.allowOverwrite","description":"<p>Entities must be updated as an entire resource. Patch operations are not supported. Because entities can be created manually, or obtained by a lookup or query, it is possible to accidentally overwrite an existing record with a new one when manually creating an entity. To provide additional safety, this flag must be set to <code>true<\/code> in order to update a record when the entity provided was not obtained through a lookup or query. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["bool"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\DomainException","description":"If a conflict occurs, fail."}],"returns":[{"types":["string"],"description":"<p>The entity version.<\/p>"}]},{"id":"updateBatch","type":"instance","name":"updateBatch","source":"DatastoreClient.php#L607","description":"<p>Update multiple entities<\/p>\n<p>Please note that updating a record in Cloud Datastore will replace the\nexisting record. Adding, editing or removing a single property is only\npossible by first retrieving the entire entity in its existing state.<\/p>\n<p>Update by this method is non-transactional. If you need transaction\nsupport, use <a data-custom-type=\"datastore\/transaction\" data-method=\"updateBatch\">Google\\Cloud\\Datastore\\Transaction::updateBatch()<\/a>.<\/p>","examples":[{"caption":"","code":"$entities[0]['firstName'] = 'Bob';\n$entities[1]['firstName'] = 'John';\n\n$datastore->updateBatch($entities);"}],"resources":[],"params":[{"name":"entities","description":"<p>The entities to be updated.<\/p>","types":["<a data-custom-type=\"datastore\/entity[]\">Google\\Cloud\\Datastore\\Entity[]<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.allowOverwrite","description":"<p>Entities must be updated as an entire resource. Patch operations are not supported. Because entities can be created manually, or obtained by a lookup or query, it is possible to accidentally overwrite an existing record with a new one when manually creating an entity. To provide additional safety, this flag must be set to <code>true<\/code> in order to update a record when the entity provided was not obtained through a lookup or query. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["bool"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p><a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/projects\/commit#response-body\">Response Body<\/a><\/p>"}]},{"id":"upsert","type":"instance","name":"upsert","source":"DatastoreClient.php#L649","description":"<p>Upsert an entity<\/p>\n<p>Upsert will create a record if one does not already exist, or overwrite\nexisting record if one already exists.<\/p>\n<p>Please note that upserting a record in Cloud Datastore will replace the\nexisting record, if one exists. Adding, editing or removing a single\nproperty is only possible by first retrieving the entire entity in its\nexisting state.<\/p>\n<p>Upsert by this method is non-transactional. If you need transaction\nsupport, use <a data-custom-type=\"datastore\/transaction\" data-method=\"upsert\">Google\\Cloud\\Datastore\\Transaction::upsert()<\/a>.<\/p>","examples":[{"caption":"","code":"$key = $datastore->key('Person', 'Bob');\n$entity = $datastore->entity($key, ['firstName' => 'Bob']);\n\n$datastore->upsert($entity);"}],"resources":[],"params":[{"name":"entity","description":"<p>The entity to be upserted.<\/p>","types":["<a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options.<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[{"type":"\\DomainException","description":"If a conflict occurs, fail."}],"returns":[{"types":["string"],"description":"<p>The entity version.<\/p>"}]},{"id":"upsertBatch","type":"instance","name":"upsertBatch","source":"DatastoreClient.php#L688","description":"<p>Upsert multiple entities<\/p>\n<p>Upsert will create a record if one does not already exist, or overwrite\nan existing record if one already exists.<\/p>\n<p>Please note that upserting a record in Cloud Datastore will replace the\nexisting record, if one exists. Adding, editing or removing a single\nproperty is only possible by first retrieving the entire entity in its\nexisting state.<\/p>\n<p>Upsert by this method is non-transactional. If you need transaction\nsupport, use <a data-custom-type=\"datastore\/transaction\" data-method=\"upsertBatch\">Google\\Cloud\\Datastore\\Transaction::upsertBatch()<\/a>.<\/p>","examples":[{"caption":"","code":"$keys = [\n    $datastore->key('Person', 'Bob'),\n    $datastore->key('Person', 'John')\n];\n\n$entities = [\n    $datastore->entity($keys[0], ['firstName' => 'Bob']),\n    $datastore->entity($keys[1], ['firstName' => 'John'])\n];\n\n$datastore->upsertBatch($entities);"}],"resources":[],"params":[{"name":"entities","description":"<p>The entities to be upserted.<\/p>","types":["<a data-custom-type=\"datastore\/entity[]\">Google\\Cloud\\Datastore\\Entity[]<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options.<\/p>","types":["array"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p><a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/projects\/commit#response-body\">Response Body<\/a><\/p>"}]},{"id":"delete","type":"instance","name":"delete","source":"DatastoreClient.php#L723","description":"<p>Delete an entity<\/p>\n<p>Deletion by this method is non-transactional. If you need transaction\nsupport, use <a data-custom-type=\"datastore\/transaction\" data-method=\"delete\">Google\\Cloud\\Datastore\\Transaction::delete()<\/a>.<\/p>","examples":[{"caption":"","code":"$key = $datastore->key('Person', 'Bob');\n\n$datastore->delete($key);"}],"resources":[],"params":[{"name":"key","description":"<p>The identifier to delete.<\/p>","types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.baseVersion","description":"<p>Provides concurrency control. The version of the entity that this mutation is being applied to. If this does not match the current version on the server, the mutation conflicts.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\DomainException","description":"If a conflict occurs, fail."}],"returns":[{"types":["string"],"description":"<p>The updated entity version number.<\/p>"}]},{"id":"deleteBatch","type":"instance","name":"deleteBatch","source":"DatastoreClient.php#L756","description":"<p>Delete multiple entities<\/p>\n<p>Deletion by this method is non-transactional. If you need transaction\nsupport, use <a data-custom-type=\"datastore\/transaction\" data-method=\"deleteBatch\">Google\\Cloud\\Datastore\\Transaction::deleteBatch()<\/a>.<\/p>","examples":[{"caption":"","code":"$keys = [\n    $datastore->key('Person', 'Bob'),\n    $datastore->key('Person', 'John')\n];\n\n$datastore->deleteBatch($keys);"}],"resources":[],"params":[{"name":"keys","description":"<p>The identifiers to delete.<\/p>","types":["<a data-custom-type=\"datastore\/key[]\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.baseVersion","description":"<p>Provides concurrency control. The version of the entity that this mutation is being applied to. If this does not match the current version on the server, the mutation conflicts.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p><a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/projects\/commit#response-body\">Response Body<\/a><\/p>"}]},{"id":"lookup","type":"instance","name":"lookup","source":"DatastoreClient.php#L798","description":"<p>Retrieve an entity from the datastore<\/p>\n<p>To lookup an entity inside a transaction, use\n<a data-custom-type=\"datastore\/transaction\" data-method=\"lookup\">Google\\Cloud\\Datastore\\Transaction::lookup()<\/a>.<\/p>","examples":[{"caption":"","code":"$key = $datastore->key('Person', 'Bob');\n\n$entity = $datastore->lookup($key);\nif (!is_null($entity)) {\n    echo $entity['firstName']; \/\/ 'Bob'\n}"}],"resources":[],"params":[{"name":"key","description":"<p>The identifier to use to locate a desired entity.<\/p>","types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.readConsistency","description":"<p>See <a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/ReadOptions#ReadConsistency\">ReadConsistency<\/a>.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.className","description":"<p>The name of the class to return results as. Must be a subclass of <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>. If not set, <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a> will be used.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>","null"],"description":""}]},{"id":"lookupBatch","type":"instance","name":"lookupBatch","source":"DatastoreClient.php#L847","description":"<p>Get multiple entities<\/p>\n<p>To lookup entities inside a transaction, use\n<a data-custom-type=\"datastore\/transaction\" data-method=\"lookupBatch\">Google\\Cloud\\Datastore\\Transaction::lookupBatch()<\/a>.<\/p>","examples":[{"caption":"","code":"$keys = [\n    $datastore->key('Person', 'Bob'),\n    $datastore->key('Person', 'John')\n];\n\n$entities = $datastore->lookupBatch($keys);\n\nforeach ($entities['found'] as $entity) {\n    echo $entity['firstName'] . PHP_EOL;\n}"}],"resources":[],"params":[{"name":"key","description":"<p>The identifiers to look up.<\/p>","types":["<a data-custom-type=\"datastore\/key[]\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.readConsistency","description":"<p>See <a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/ReadOptions#ReadConsistency\">ReadConsistency<\/a>.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.className","description":"<p>If a string, the name of the class to return results as. Must be a subclass of <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>. If not set, <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a> will be used. If an array is given, it must be an associative array, where the key is a Kind and the value is the name of a subclass of <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>.<\/p>","types":["string","array"],"optional":null,"nullable":null},{"name":"options.sort","description":"<p>If set to true, results in each set will be sorted to match the order given in $keys. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["bool"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p>Returns an array with keys [<code>found<\/code>, <code>missing<\/code>, and <code>deferred<\/code>].\nMembers of <code>found<\/code> will be instance of\n<a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>. Members of <code>missing<\/code> and\n<code>deferred<\/code> will be instance of <a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>.<\/p>"}]},{"id":"query","type":"instance","name":"query","source":"DatastoreClient.php#L866","description":"<p>Create a Query<\/p>\n<p>The Query class can be used as a builder, or it can accept a query\nrepresentation at instantiation.<\/p>","examples":[{"caption":"","code":"$query = $datastore->query();"}],"resources":[],"params":[{"name":"query","description":"<p><a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/projects\/runQuery#query\">Query<\/a><\/p>","types":["array"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/query\/query\">Google\\Cloud\\Datastore\\Query\\Query<\/a>"],"description":""}]},{"id":"gqlQuery","type":"instance","name":"gqlQuery","source":"DatastoreClient.php#L925","description":"<p>Create a GqlQuery<\/p>","examples":[{"caption":"","code":"$query = $datastore->gqlQuery('SELECT * FROM Companies');"},{"caption":"<p>Literals must be provided as bound parameters by default:<\/p>","code":"$query = $datastore->gqlQuery('SELECT * FROM Companies WHERE companyName = @companyName', [\n    'bindings' => [\n        'companyName' => 'Bob'\n    ]\n]);"},{"caption":"<p>Positional binding is also supported:<\/p>","code":"$query = $datastore->gqlQuery('SELECT * FROM Companies WHERE companyName = @1 LIMIT 1', [\n    'bindings' => [\n        'Google'\n    ]\n]);"},{"caption":"<p>While not recommended, you can use literals in your query string:<\/p>","code":"$query = $datastore->gqlQuery(\"SELECT * FROM Companies WHERE companyName = 'Google'\", [\n    'allowLiterals' => true\n]);"}],"resources":[],"params":[{"name":"query","description":"<p>The <a href=\"https:\/\/cloud.google.com\/datastore\/docs\/apis\/gql\/gql_reference\">GQL Query<\/a> string.<\/p>","types":["string"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.allowLiterals","description":"<p>Whether literal values will be allowed in the query string. Parameter binding is strongly encouraged over literals. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["bool"],"optional":null,"nullable":null},{"name":"options.bindings","description":"<p>An array of values to bind to the query string. Queries using Named Bindings should provide a key\/value set, while queries using Positional Bindings must provide a simple array.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options.readConsistency","description":"<p>See <a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/ReadOptions#ReadConsistency\">ReadConsistency<\/a>.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/query\/gqlquery\">Google\\Cloud\\Datastore\\Query\\GqlQuery<\/a>"],"description":""}]},{"id":"runQuery","type":"instance","name":"runQuery","source":"DatastoreClient.php#L957","description":"<p>Run a query and return entities<\/p>\n<p>To query datastore inside a transaction, use\n<a data-custom-type=\"datastore\/transaction\" data-method=\"runQuery\">Google\\Cloud\\Datastore\\Transaction::runQuery()<\/a>.<\/p>","examples":[{"caption":"","code":"$result = $datastore->runQuery($query);\n\nforeach ($result as $entity) {\n    echo $entity['firstName'];\n}"}],"resources":[],"params":[{"name":"query","description":"<p>A query object.<\/p>","types":["<a data-custom-type=\"datastore\/query\/queryinterface\">Google\\Cloud\\Datastore\\Query\\QueryInterface<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.className","description":"<p>The name of the class to return results as. Must be a subclass of <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>. If not set, <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a> will be used.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.readConsistency","description":"<p>See <a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/ReadOptions#ReadConsistency\">ReadConsistency<\/a>.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["Generator&lt;<a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>&gt;"],"description":""}]}]}