{"id":"iam\/iam","type":"class","title":"Google\\Cloud\\Iam\\Iam","name":"Iam","description":"<p>IAM Manager<\/p>\n<p>This class is not meant to be used directly. It should be accessed\nthrough other objects which support IAM.<\/p>\n<p>Note that examples make use of the PubSub API, and the\n<a data-custom-type=\"pubsub\/topic\">Google\\Cloud\\PubSub\\Topic<\/a> class.<\/p>\n<p>Policies can be created using the <a data-custom-type=\"iam\/policybuilder\">Google\\Cloud\\Iam\\PolicyBuilder<\/a> to\nhelp ensure their validity.<\/p>","resources":[],"methods":[{"id":"policy","type":"instance","name":"policy","source":"\/src\/Iam\/Iam.php#L75","description":"<p>Get the existing IAM policy for this resource.<\/p>\n<p>If a policy has already been retrieved from the API, it will be returned.\nTo fetch a fresh copy of the policy, use <a data-custom-type=\"iam\/iam\" data-method=\"reload\">Google\\Cloud\\Iam\\Iam::reload()<\/a>.<\/p>","examples":[{"caption":"","code":"$topic = $pubsub->topic('my-topic-name');\n$policy = $topic->iam()->policy();"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p>An array of policy data<\/p>"}]},{"id":"setPolicy","type":"instance","name":"setPolicy","source":"\/src\/Iam\/Iam.php#L104","description":"<p>Set the IAM policy for this resource.<\/p>\n<p>Bindings with invalid roles, or non-existent members will raise a server\nerror.<\/p>","examples":[{"caption":"","code":"$topic = $pubsub->topic('my-topic-name');\n\n$oldPolicy = $topic->iam()->policy();\n$oldPolicy['bindings'][0]['members'] = 'user:test@example.com';\n\n$policy = $topic->iam()->setPolicy($oldPolicy);"}],"resources":[],"params":[{"name":"policy","description":"<p>A new policy array<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p>An array of policy data<\/p>"}]},{"id":"testPermissions","type":"instance","name":"testPermissions","source":"\/src\/Iam\/Iam.php#L136","description":"<p>Test if the current user has the given permissions on this resource.<\/p>\n<p>Invalid permissions will raise a BadRequestException.<\/p>\n<p>A list of allowed permissions can be found in the\n<a href=\"https:\/\/cloud.google.com\/pubsub\/access_control#permissions\">access control documentation<\/a>.<\/p>","examples":[{"caption":"","code":"$topic = $pubsub->topic('my-topic-name');\n\n$allowedPermissions = $topic->iam()->testPermissions([\n    'pubsub.topics.publish',\n    'pubsub.topics.attachSubscription'\n]);"}],"resources":[],"params":[{"name":"permissions","description":"<p>A list of permissions to test<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p>A subset of $permissions, with only those allowed included.<\/p>"}]},{"id":"reload","type":"instance","name":"reload","source":"\/src\/Iam\/Iam.php#L156","description":"<p>Refresh the IAM policy for this resource.<\/p>","examples":[{"caption":"","code":"$topic = $pubsub->topic('my-topic-name');\n$topic->iam()->reload();"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p>An array of policy data<\/p>"}]}]}