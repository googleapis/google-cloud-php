{"id":"speech\/speechclient","type":"","title":"Google\\Cloud\\Speech\\SpeechClient","name":"SpeechClient","description":"<p>Google Cloud Speech enables easy integration of Google speech recognition\ntechnologies into developer applications. Send audio and receive a text\ntranscription from the Cloud Speech API service. Find more information at the\n<a href=\"https:\/\/cloud.google.com\/speech\/docs\/\">Google Cloud Speech docs<\/a>.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\Speech\\SpeechClient;\n\n$speech = new SpeechClient([\n    'languageCode' => 'en-US'\n]);"}],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"src\/Speech\/SpeechClient.php#L91","description":"<p>Create a Speech client.<\/p>","examples":[],"resources":[],"params":[{"name":"config","description":"<p>Configuration Options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"config.projectId","description":"<p>The project ID from the Google Developer's Console.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"config.authCache","description":"<p>A cache for storing access tokens. <strong>Defaults to<\/strong> a simple in memory implementation.<\/p>","types":["CacheItemPoolInterface"],"optional":null,"nullable":null},{"name":"config.authCacheOptions","description":"<p>Cache configuration options.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"config.authHttpHandler","description":"<p>A handler used to deliver Psr7 requests specifically for authentication.<\/p>","types":["callable"],"optional":null,"nullable":null},{"name":"config.httpHandler","description":"<p>A handler used to deliver Psr7 requests. Only valid for requests sent over REST.<\/p>","types":["callable"],"optional":null,"nullable":null},{"name":"config.keyFile","description":"<p>The contents of the service account credentials .json file retrieved from the Google Developer's Console. Ex: <code>json_decode(file_get_contents($path), true)<\/code>.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"config.keyFilePath","description":"<p>The full path to your service account credentials .json file retrieved from the Google Developers Console.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"config.retries","description":"<p>Number of retries for a failed request. <strong>Defaults to<\/strong> <code>3<\/code>.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"config.scopes","description":"<p>Scopes to be used for the request.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"config.languageCode","description":"<p>Required. The language of the content to be recognized. Only BCP-47 (e.g., <code>\"en-US\"<\/code>, <code>\"es-ES\"<\/code>) language codes are accepted. See <a href=\"https:\/\/cloud.google.com\/speech\/docs\/languages\">Language Support<\/a> for a list of the currently supported language codes.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[]},{"id":"recognize","type":"instance","name":"recognize","source":"src\/Speech\/SpeechClient.php#L203","description":"<p>Runs a recognize request and returns the results immediately. Ideal when\nworking with audio up to approximately one minute in length.<\/p>\n<p>The Google Cloud Client Library will attempt to infer the sample rate\nand encoding used by the provided audio file for you. This feature is\nrecommended only if you are unsure of what the values may be and is\ncurrently limited to .flac, .amr, and .awb file types.<\/p>","examples":[{"caption":"","code":"$results = $speech->recognize(\n    fopen(__DIR__  . '\/audio.flac', 'r')\n);\n\nforeach ($results as $result) {\n    echo $result['transcript'];\n}"},{"caption":"<p>Run with speech contexts, sample rate, and encoding provided<\/p>","code":"$results = $speech->recognize(\n    fopen(__DIR__  . '\/audio.flac', 'r'), [\n    'encoding' => 'FLAC',\n    'sampleRateHertz' => 16000,\n    'speechContexts' => [\n        [\n            'phrases' => [\n                'The Google Cloud Platform',\n                'Speech API'\n            ]\n        ]\n    ]\n]);\n\nforeach ($results as $result) {\n    echo $result['transcript'];\n}"}],"resources":[{"title":"SpeechRecognitionAlternative","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/speech\/recognize#SpeechRecognitionAlternative"},{"title":"Recognize API documentation","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/speech\/recognize"},{"title":"AudioEncoding types","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/RecognitionConfig#AudioEncoding"},{"title":"Speech API best practices","link":"https:\/\/cloud.google.com\/speech\/docs\/best-practices"}],"params":[{"name":"audio","description":"<p>The audio to recognize. May\nbe a resource, string of bytes, a URI pointing to a\nGoogle Cloud Storage object in the format of\n<code>gs:\/\/{bucket-name}\/{object-name}<\/code> or a\n<a data-custom-type=\"cloud-storage\/v1.0.0\/storage\/storageobject\">Google\\Cloud\\Storage\\StorageObject<\/a>.<\/p>","types":["resource","string","<a data-custom-type=\"cloud-storage\/v1.0.0\/storage\/storageobject\">Google\\Cloud\\Storage\\StorageObject<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.detectGcsUri","description":"<p>When providing $audio as a string, this flag determines whether or not to attempt to detect if the string represents a Google Cloud Storage URI in the format of <code>gs:\/\/{bucket-name}\/{object-name}<\/code>. <strong>Defaults to<\/strong> <code>true<\/code>.<\/p>","types":["bool"],"optional":null,"nullable":null},{"name":"options.languageCode","description":"<p>The language of the content. BCP-47 (e.g., <code>\"en-US\"<\/code>, <code>\"es-ES\"<\/code>) language codes are accepted. See <a href=\"https:\/\/cloud.google.com\/speech\/docs\/languages\">Language Support<\/a> for a list of the currently supported language codes. <strong>Defaults to<\/strong> the value set on the client.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.sampleRateHertz","description":"<p>Sample rate in Hertz of the provided audio. Valid values are: 8000-48000. 16000 is optimal. For best results, set the sampling rate of the audio source to 16000 Hz. If that's not possible, use the native sample rate of the audio source (instead of re-sampling). <strong>Defaults to<\/strong> <code>8000<\/code> with .amr files and <code>16000<\/code> with .awb files. For .flac files the Speech API will make a best effort to read the sample rate from the file's headers.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.encoding","description":"<p>Encoding of the provided audio. May be one of <code>\"LINEAR16\"<\/code>, <code>\"FLAC\"<\/code>, <code>\"MULAW\"<\/code>, <code>\"AMR\"<\/code>, <code>\"AMR_WB\"<\/code>. <strong>Defaults to<\/strong> <code>\"FLAC\"<\/code> with .flac files, <code>\"AMR\"<\/code> with .amr files and <code>\"AMR_WB\"<\/code> with .awb files.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.maxAlternatives","description":"<p>Maximum number of alternatives to be returned. Valid values are 1-30. <strong>Defaults to<\/strong> <code>1<\/code>.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.profanityFilter","description":"<p>If set to <code>true<\/code>, the server will attempt to filter out profanities, replacing all but the initial character in each filtered word with asterisks, e.g. \\&quot;f*<strong>\\&quot;. <\/strong>Defaults to** <code>false<\/code>.<\/p>","types":["bool"],"optional":null,"nullable":null},{"name":"options.speechContexts","description":"<p>A list of arrays where each element must contain a key <code>phrases<\/code>. Each key <code>phrases<\/code> should contain an array of strings which provide &quot;hints&quot; to the speech recognizer to favor specific words and phrases in the results. Please see <a href=\"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/RecognitionConfig#SpeechContext\">SpeechContext<\/a> for more information.<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["array"],"description":"<p>The transcribed results. Each element of the array contains\na <code>transcript<\/code> key which holds the transcribed text. Optionally\na <code>confidence<\/code> key holding the confidence estimate ranging from\n0.0 to 1.0 may be present. <code>confidence<\/code> is typically provided\nonly for the top hypothesis.<\/p>"}]},{"id":"beginRecognizeOperation","type":"instance","name":"beginRecognizeOperation","source":"src\/Speech\/SpeechClient.php#L322","description":"<p>Runs a recognize request as an operation. Ideal when working with audio\nlonger than approximately one minute. Requires polling of the returned\noperation in order to fetch results.<\/p>\n<p>The Google Cloud Client Library will attempt to infer the sample rate\nand encoding used by the provided audio file for you. This feature is\nrecommended only if you are unsure of what the values may be and is\ncurrently limited to .flac, .amr, and .awb file types.<\/p>\n<p>For longer audio, up to approximately 80 minutes, you must use Google\nCloud Storage objects as input. In addition to this restriction, only\nLINEAR16 audio encoding can be used for long audio inputs.<\/p>","examples":[{"caption":"","code":"$operation = $speech->beginRecognizeOperation(\n    fopen(__DIR__  . '\/audio.flac', 'r')\n);\n\n$isComplete = $operation->isComplete();\n\nwhile (!$isComplete) {\n    sleep(1); \/\/ let's wait for a moment...\n    $operation->reload();\n    $isComplete = $operation->isComplete();\n}\n\nprint_r($operation->results());"},{"caption":"<p>Run with speech contexts, sample rate, and encoding provided<\/p>","code":"$operation = $speech->beginRecognizeOperation(\n    fopen(__DIR__  . '\/audio.flac', 'r'), [\n    'encoding' => 'FLAC',\n    'sampleRateHertz' => 16000,\n    'speechContexts' => [\n        [\n            'phrases' => [\n                'The Google Cloud Platform',\n                'Speech API'\n            ]\n        ]\n    ]\n]);\n\n$isComplete = $operation->isComplete();\n\nwhile (!$isComplete) {\n    sleep(1); \/\/ let's wait for a moment...\n    $operation->reload();\n    $isComplete = $operation->isComplete();\n}\n\nprint_r($operation->results());"}],"resources":[{"title":"Operations","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/operations"},{"title":"LongRunningRecognize API documentation","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/speech\/longrunningrecognize"},{"title":"AudioEncoding types","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/RecognitionConfig#AudioEncoding"},{"title":"Speech API best practices","link":"https:\/\/cloud.google.com\/speech\/docs\/best-practices"}],"params":[{"name":"audio","description":"<p>The audio to recognize. May\nbe a resource, string of bytes, a URI pointing to a\nGoogle Cloud Storage object in the format of\n<code>gs:\/\/{bucket-name}\/{object-name}<\/code> or a\n<a data-custom-type=\"cloud-storage\/v1.0.0\/storage\/storageobject\">Google\\Cloud\\Storage\\StorageObject<\/a>.<\/p>","types":["resource","string","<a data-custom-type=\"cloud-storage\/v1.0.0\/storage\/storageobject\">Google\\Cloud\\Storage\\StorageObject<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.detectGcsUri","description":"<p>When providing $audio as a string, this flag determines whether or not to attempt to detect if the string represents a Google Cloud Storage URI in the format of <code>gs:\/\/{bucket-name}\/{object-name}<\/code>. <strong>Defaults to<\/strong> <code>true<\/code>.<\/p>","types":["bool"],"optional":null,"nullable":null},{"name":"options.languageCode","description":"<p>The language of the content. BCP-47 (e.g., <code>\"en-US\"<\/code>, <code>\"es-ES\"<\/code>) language codes are accepted. See <a href=\"https:\/\/cloud.google.com\/speech\/docs\/languages\">Language Support<\/a> for a list of the currently supported language codes. <strong>Defaults to<\/strong> the value set on the client.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.sampleRateHertz","description":"<p>Sample rate in Hertz of the provided audio. Valid values are: 8000-48000. 16000 is optimal. For best results, set the sampling rate of the audio source to 16000 Hz. If that's not possible, use the native sample rate of the audio source (instead of re-sampling). <strong>Defaults to<\/strong> <code>8000<\/code> with .amr files and <code>16000<\/code> with .awb files. For .flac files the Speech API will make a best effort to read the sample rate from the file's headers.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.encoding","description":"<p>Encoding of the provided audio. May be one of <code>\"LINEAR16\"<\/code>, <code>\"FLAC\"<\/code>, <code>\"MULAW\"<\/code>, <code>\"AMR\"<\/code>, <code>\"AMR_WB\"<\/code>. <strong>Defaults to<\/strong> <code>\"FLAC\"<\/code> with .flac files, <code>\"AMR\"<\/code> with .amr files and <code>\"AMR_WB\"<\/code> with .awb files.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.maxAlternatives","description":"<p>Maximum number of alternatives to be returned. Valid values are 1-30. <strong>Defaults to<\/strong> <code>1<\/code>.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.profanityFilter","description":"<p>If set to <code>true<\/code>, the server will attempt to filter out profanities, replacing all but the initial character in each filtered word with asterisks, e.g. \\&quot;f*<strong>\\&quot;. <\/strong>Defaults to** <code>false<\/code>.<\/p>","types":["bool"],"optional":null,"nullable":null},{"name":"options.speechContexts","description":"<p>A list of arrays where each element must contain a key <code>phrases<\/code>. Each key <code>phrases<\/code> should contain an array of strings which provide &quot;hints&quot; to the speech recognizer to favor specific words and phrases in the results. Please see <a href=\"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/RecognitionConfig#SpeechContext\">SpeechContext<\/a> for more information.<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["<a data-custom-type=\"speech\/operation\">Google\\Cloud\\Speech\\Operation<\/a>"],"description":""}]},{"id":"operation","type":"instance","name":"operation","source":"src\/Speech\/SpeechClient.php#L349","description":"<p>Lazily instantiates an operation. There are no network requests made at\nthis point. To see the operations that can be performed on an operation\nplease see <a data-custom-type=\"speech\/operation\">Google\\Cloud\\Speech\\Operation<\/a>.<\/p>","examples":[{"caption":"<p>Access an existing operation by its server generated name.<\/p>","code":"$operation = $speech->operation($operationName);"}],"resources":[],"params":[{"name":"name","description":"<p>The name of the operation to request.<\/p>","types":["string"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"speech\/operation\">Google\\Cloud\\Speech\\Operation<\/a>"],"description":""}]}]}