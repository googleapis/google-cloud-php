{"id":"core\/iam\/iam","type":"","title":"Google\\Cloud\\Core\\Iam\\Iam","name":"Iam","description":"<p>IAM Manager<\/p>\n<p>This class is not meant to be used directly. It should be accessed\nthrough other objects which support IAM.<\/p>\n<p>Policies can be created using the <a data-custom-type=\"cloud-core\/v1.39.0\/core\/iam\/policybuilder\">Google\\Cloud\\Core\\Iam\\PolicyBuilder<\/a>\nto help ensure their validity.<\/p>","examples":[{"caption":"<p>IAM policies are obtained via resources which implement IAM. In this example, we'll use PubSub topics to demonstrate how IAM policies are managed.<\/p>","code":"use Google\\Cloud\\PubSub\\PubSubClient;\n\n$pubsub = new PubSubClient();\n$topic = $pubsub->topic('my-new-topic');\n\n$iam = $topic->iam();"}],"resources":[],"methods":[{"id":"policy","type":"instance","name":"policy","source":"Core\/src\/Iam\/Iam.php#L115","description":"<p>Get the existing IAM policy for this resource.<\/p>\n<p>If a policy has already been retrieved from the API, it will be returned.\nTo fetch a fresh copy of the policy, use\n<a data-custom-type=\"cloud-core\/v1.39.0\/core\/iam\/iam\" data-method=\"reload\">Google\\Cloud\\Core\\Iam\\Iam::reload()<\/a>.<\/p>","examples":[{"caption":"","code":"$policy = $iam->policy();"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options['requestedPolicyVersion']","description":"<p>Specify the policy version to\nrequest from the server. Please see\n<a href=\"https:\/\/cloud.google.com\/iam\/docs\/policies#versions\">policy versioning<\/a>\nfor more information.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":"<p>An array of policy data<\/p>"}]},{"id":"setPolicy","type":"instance","name":"setPolicy","source":"Core\/src\/Iam\/Iam.php#L144","description":"<p>Set the IAM policy for this resource.<\/p>\n<p>Bindings with invalid roles, or non-existent members will raise a server\nerror.<\/p>","examples":[{"caption":"","code":"$oldPolicy = $iam->policy();\n$oldPolicy['bindings'][0]['members'] = 'user:test@example.com';\n\n$policy = $iam->setPolicy($oldPolicy);"}],"resources":[],"params":[{"name":"policy","description":"<p>The new policy, as an array or an\ninstance of <a data-custom-type=\"cloud-core\/v1.39.0\/core\/iam\/policybuilder\">Google\\Cloud\\Core\\Iam\\PolicyBuilder<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>","<a data-custom-type=\"cloud-core\/v1.39.0\/core\/iam\/policybuilder\">Google\\Cloud\\Core\\Iam\\PolicyBuilder<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":"If the given policy is not an array or PolicyBuilder."}],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":"<p>An array of policy data<\/p>"}]},{"id":"testPermissions","type":"instance","name":"testPermissions","source":"Core\/src\/Iam\/Iam.php#L184","description":"<p>Test if the current user has the given permissions on this resource.<\/p>\n<p>Invalid permissions will raise a BadRequestException.<\/p>","examples":[{"caption":"","code":"$allowedPermissions = $iam->testPermissions([\n    'pubsub.topics.publish',\n    'pubsub.topics.attachSubscription'\n]);"}],"resources":[],"params":[{"name":"permissions","description":"<p>A list of permissions to test<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":"<p>A subset of $permissions, with only those allowed included.<\/p>"}]},{"id":"reload","type":"instance","name":"reload","source":"Core\/src\/Iam\/Iam.php#L205","description":"<p>Refresh the IAM policy for this resource.<\/p>","examples":[{"caption":"","code":"$policy = $iam->reload();"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":"<p>An array of policy data<\/p>"}]}]}