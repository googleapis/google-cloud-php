{"id":"monitoring\/readme","type":"guide","title":"Stackdriver Monitoring","name":"Stackdriver Monitoring","description":"<body>\n\n\n<p>Stackdriver Monitoring provides visibility into the performance, uptime, and overall health of cloud-powered applications.<\/p>\n<h3>Installation<\/h3>\n<p>To begin, install the preferred dependency manager for PHP, <a href=\"https:\/\/getcomposer.org\/\">Composer<\/a>.<\/p>\n<p>Now to install just this component:<\/p>\n<pre><code class=\"language-sh\">$ composer require google\/cloud-monitoring<\/code><\/pre>\n<p>Or to install the entire suite of components at once:<\/p>\n<pre><code class=\"language-sh\">$ composer require google\/cloud<\/code><\/pre>\n<p>This component supports both REST over HTTP\/1.1 and gRPC. In order to take advantage of the benefits offered by gRPC (such as streaming methods)\nplease see our <a href=\"https:\/\/cloud.google.com\/php\/grpc\">gRPC installation guide<\/a>.<\/p>\n<h3>Authentication<\/h3>\n<p>Please see our <a href=\"https:\/\/github.com\/googleapis\/google-cloud-php\/blob\/master\/AUTHENTICATION.md\">Authentication guide<\/a> for more information\non authenticating your client. Once authenticated, you'll be ready to start making requests.<\/p>\n<h3>Sample<\/h3>\n<pre><code class=\"language-php\">use Google\\Api\\Metric;\nuse Google\\Api\\MonitoredResource;\nuse Google\\Cloud\\Monitoring\\V3\\MetricServiceClient;\nuse Google\\Cloud\\Monitoring\\V3\\Point;\nuse Google\\Cloud\\Monitoring\\V3\\TimeInterval;\nuse Google\\Cloud\\Monitoring\\V3\\TimeSeries;\nuse Google\\Cloud\\Monitoring\\V3\\TypedValue;\nuse Google\\Protobuf\\Timestamp;\n\n$metricServiceClient = new MetricServiceClient();\n$formattedProjectName = $metricServiceClient-&gt;projectName($projectId);\n$labels = [\n    'instance_id' =&gt; $instanceId,\n    'zone' =&gt; $zone,\n];\n\n$m = new Metric();\n$m-&gt;setType('custom.googleapis.com\/my_metric');\n\n$r = new MonitoredResource();\n$r-&gt;setType('gce_instance');\n$r-&gt;setLabels($labels);\n\n$value = new TypedValue();\n$value-&gt;setDoubleValue(3.14);\n\n$timestamp = new Timestamp();\n$timestamp-&gt;setSeconds(time());\n\n$interval = new TimeInterval();\n$interval-&gt;setStartTime($timestamp);\n$interval-&gt;setEndTime($timestamp);\n\n$point = new Point();\n$point-&gt;setValue($value);\n$point-&gt;setInterval($interval);\n$points = [$point];\n\n$timeSeries = new TimeSeries();\n$timeSeries-&gt;setMetric($m);\n$timeSeries-&gt;setResource($r);\n$timeSeries-&gt;setPoints($points);\n\ntry {\n    $metricServiceClient-&gt;createTimeSeries($formattedProjectName, [$timeSeries]);\n    print('Successfully submitted a time series' . PHP_EOL);\n} finally {\n    $metricServiceClient-&gt;close();\n}<\/code><\/pre>\n<h3>Version<\/h3>\n<p>This component is considered GA (generally available). As such, it will not introduce backwards-incompatible changes in\nany minor or patch releases. We will address issues and requests with the highest priority.<\/p>\n<h3>Next Steps<\/h3>\n<ol><li>Understand the <a href=\"https:\/\/cloud.google.com\/monitoring\/docs\/\">official documentation<\/a>.<\/li>\n<li>Take a look at <a href=\"https:\/\/github.com\/GoogleCloudPlatform\/php-docs-samples\/tree\/master\/monitoring\/\">in-depth usage samples<\/a>.<\/li>\n<\/ol><\/body>","methods":[]}