{"id":"speech\/speechclient","type":"","title":"Google\\Cloud\\Speech\\SpeechClient","name":"SpeechClient","description":"<p>Google Cloud Speech enables easy integration of Google speech recognition\ntechnologies into developer applications. Send audio and receive a text\ntranscription from the Cloud Speech API service. Find more information at the\n<a href=\"https:\/\/cloud.google.com\/speech\/docs\/\">Google Cloud Speech docs<\/a>.<\/p>\n<p>Please note this client will be deprecated in our next release. In order\nto receive the latest features and updates, please take\nthe time to familiarize yourself with <a data-custom-type=\"speech\/v1\/speechclient\">Google\\Cloud\\Speech\\V1\\SpeechClient<\/a>.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\Speech\\SpeechClient;\n\n$speech = new SpeechClient([\n    'languageCode' => 'en-US'\n]);"}],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"Speech\/src\/SpeechClient.php#L111","description":"<p>Create a Speech client.<\/p>\n<p>Note that when creating a SpeechClient instance, setting\n<code>$config.projectId<\/code> is not supported. To switch between projects, you\nmust provide credentials with access to the project.<\/p>","examples":[],"resources":[],"params":[{"name":"config","description":"<p>Configuration Options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"config.apiEndpoint","description":"<p>A hostname with optional port to use in place of the service's default endpoint.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"config.authCache","description":"<p>A cache for storing access tokens. <strong>Defaults to<\/strong> a simple in memory implementation.<\/p>","types":["<a href=\"https:\/\/github.com\/php-fig\/cache\/tree\/1.0.1\/src\/CacheItemPoolInterface.php\" target=\"_blank\">Psr\\Cache\\CacheItemPoolInterface<\/a>"],"optional":null,"nullable":null},{"name":"config.authCacheOptions","description":"<p>Cache configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"config.authHttpHandler","description":"<p>A handler used to deliver Psr7 requests specifically for authentication.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.callable.php\" target=\"_blank\">callable<\/a>"],"optional":null,"nullable":null},{"name":"config.credentialsFetcher","description":"<p>A credentials fetcher instance.<\/p>","types":["<a href=\"https:\/\/github.com\/googleapis\/google-auth-library-php\/tree\/v1.12.0\/src\/FetchAuthTokenInterface.php\" target=\"_blank\">Google\\Auth\\FetchAuthTokenInterface<\/a>"],"optional":null,"nullable":null},{"name":"config.httpHandler","description":"<p>A handler used to deliver Psr7 requests. Only valid for requests sent over REST.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.callable.php\" target=\"_blank\">callable<\/a>"],"optional":null,"nullable":null},{"name":"config.keyFile","description":"<p>The contents of the service account credentials .json file retrieved from the Google Developer's Console. Ex: <code>json_decode(file_get_contents($path), true)<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"config.keyFilePath","description":"<p>The full path to your service account credentials .json file retrieved from the Google Developers Console.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"config.requestTimeout","description":"<p>Seconds to wait before timing out the request. <strong>Defaults to<\/strong> <code>0<\/code> with REST and <code>60<\/code> with gRPC.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.float.php\" target=\"_blank\">float<\/a>"],"optional":null,"nullable":null},{"name":"config.retries","description":"<p>Number of retries for a failed request. <strong>Defaults to<\/strong> <code>3<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"config.scopes","description":"<p>Scopes to be used for the request.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"config.quotaProject","description":"<p>Specifies a user project to bill for access charges associated with the request.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"config.languageCode","description":"<p>The language of the content to be recognized. Only BCP-47 (e.g., <code>\"en-US\"<\/code>, <code>\"es-ES\"<\/code>) language codes are accepted. See <a href=\"https:\/\/cloud.google.com\/speech\/docs\/languages\">Language Support<\/a> for a list of the currently supported language codes. This value will be used by default for any requests sent through the client. If not provided, you must include a language code with each individual request.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[]},{"id":"recognize","type":"instance","name":"recognize","source":"Speech\/src\/SpeechClient.php#L221","description":"<p>Runs a recognize request and returns the results immediately. Ideal when\nworking with audio up to approximately one minute in length.<\/p>","examples":[{"caption":"","code":"$results = $speech->recognize(\n    fopen(__DIR__  . '\/audio.flac', 'r')\n);\n\nforeach ($results as $result) {\n    echo $result->topAlternative()['transcript'] . PHP_EOL;\n}"},{"caption":"<p>Run with speech contexts, sample rate, and encoding provided<\/p>","code":"$results = $speech->recognize(\n    fopen(__DIR__  . '\/audio.flac', 'r'), [\n    'encoding' => 'FLAC',\n    'sampleRateHertz' => 16000,\n    'speechContexts' => [\n        [\n            'phrases' => [\n                'The Google Cloud Platform',\n                'Speech API'\n            ]\n        ]\n    ]\n]);\n\nforeach ($results as $result) {\n    echo $result->topAlternative()['transcript'] . PHP_EOL;\n}"}],"resources":[{"title":"SpeechRecognitionResult","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/speech\/recognize#SpeechRecognitionResult"},{"title":"Recognize API documentation","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/speech\/recognize"},{"title":"AudioEncoding types","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/RecognitionConfig#AudioEncoding"},{"title":"Speech API best practices","link":"https:\/\/cloud.google.com\/speech\/docs\/best-practices"}],"params":[{"name":"audio","description":"<p>The audio to recognize. May\nbe a resource, string of bytes, a URI pointing to a\nGoogle Cloud Storage object in the format of\n<code>gs:\/\/{bucket-name}\/{object-name}<\/code> or a\n<a data-custom-type=\"storage\/storageobject\">Google\\Cloud\\Storage\\StorageObject<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.resource.php\" target=\"_blank\">resource<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>","<a data-custom-type=\"storage\/storageobject\">Google\\Cloud\\Storage\\StorageObject<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.detectGcsUri","description":"<p>When providing $audio as a string, this flag determines whether or not to attempt to detect if the string represents a Google Cloud Storage URI in the format of <code>gs:\/\/{bucket-name}\/{object-name}<\/code>. <strong>Defaults to<\/strong> <code>true<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.languageCode","description":"<p>The language of the content. BCP-47 (e.g., <code>\"en-US\"<\/code>, <code>\"es-ES\"<\/code>) language codes are accepted. See <a href=\"https:\/\/cloud.google.com\/speech\/docs\/languages\">Language Support<\/a> for a list of the currently supported language codes. This value will be required if a default has not been set on the client. <strong>Defaults to<\/strong> the value set on the client.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.sampleRateHertz","description":"<p>Sample rate in Hertz of the provided audio. Valid values are: 8000-48000. 16000 is optimal. For best results, set the sampling rate of the audio source to 16000 Hz. If that's not possible, use the native sample rate of the audio source (instead of re-sampling). For .flac and .wav files the Speech API will make a best effort to read the sample rate from the file's headers.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.encoding","description":"<p>Encoding of the provided audio. May be one of <code>\"LINEAR16\"<\/code>, <code>\"FLAC\"<\/code>, <code>\"MULAW\"<\/code>, <code>\"AMR\"<\/code>, <code>\"AMR_WB\"<\/code>. For .flac and .wav files the Speech API will make a best effort to determine the encoding type from the file's headers.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.maxAlternatives","description":"<p>Maximum number of alternatives to be returned. Valid values are 1-30. <strong>Defaults to<\/strong> <code>1<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.profanityFilter","description":"<p>If set to <code>true<\/code>, the server will attempt to filter out profanities, replacing all but the initial character in each filtered word with asterisks, e.g. \\&quot;f*<strong>\\&quot;. <\/strong>Defaults to** <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.speechContexts","description":"<p>A list of arrays where each element must contain a key <code>phrases<\/code>. Each key <code>phrases<\/code> should contain an array of strings which provide &quot;hints&quot; to the speech recognizer to favor specific words and phrases in the results. Please see <a href=\"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/RecognitionConfig#SpeechContext\">SpeechContext<\/a> for more information.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.enableWordTimeOffsets","description":"<p>If set to <code>true<\/code>, a list of <code>wordTimeOffsets<\/code> are returned with the top alternative. If <code>false<\/code> or omitted, no <code>wordTimeOffsets<\/code> are returned. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":"<p>Result[]<\/p>"}]},{"id":"beginRecognizeOperation","type":"instance","name":"beginRecognizeOperation","source":"Speech\/src\/SpeechClient.php#L350","description":"<p>Runs a recognize request as an operation. Ideal when working with audio\nlonger than approximately one minute. Requires polling of the returned\noperation in order to fetch results.<\/p>\n<p>For longer audio, up to approximately 80 minutes, you must use Google\nCloud Storage objects as input. In addition to this restriction, only\nLINEAR16 audio encoding can be used for long audio inputs.<\/p>","examples":[{"caption":"","code":"$operation = $speech->beginRecognizeOperation(\n    fopen(__DIR__  . '\/audio.flac', 'r')\n);\n\n$isComplete = $operation->isComplete();\n\nwhile (!$isComplete) {\n    sleep(1); \/\/ let's wait for a moment...\n    $operation->reload();\n    $isComplete = $operation->isComplete();\n}\n\n$result = $operation->results()[0];\nprint_r($result->topAlternative());"},{"caption":"<p>Run with speech contexts, sample rate, and encoding provided<\/p>","code":"$operation = $speech->beginRecognizeOperation(\n    fopen(__DIR__  . '\/audio.flac', 'r'), [\n    'encoding' => 'FLAC',\n    'sampleRateHertz' => 16000,\n    'speechContexts' => [\n        [\n            'phrases' => [\n                'The Google Cloud Platform',\n                'Speech API'\n            ]\n        ]\n    ]\n]);\n\n$isComplete = $operation->isComplete();\n\nwhile (!$isComplete) {\n    sleep(1); \/\/ let's wait for a moment...\n    $operation->reload();\n    $isComplete = $operation->isComplete();\n}\n\n$result = $operation->results()[0];\nprint_r($result->topAlternative());"}],"resources":[{"title":"Operations","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/operations"},{"title":"LongRunningRecognize API documentation","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/speech\/longrunningrecognize"},{"title":"AudioEncoding types","link":"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/RecognitionConfig#AudioEncoding"},{"title":"Speech API best practices","link":"https:\/\/cloud.google.com\/speech\/docs\/best-practices"}],"params":[{"name":"audio","description":"<p>The audio to recognize. May\nbe a resource, string of bytes, a URI pointing to a\nGoogle Cloud Storage object in the format of\n<code>gs:\/\/{bucket-name}\/{object-name}<\/code> or a\n<a data-custom-type=\"storage\/storageobject\">Google\\Cloud\\Storage\\StorageObject<\/a>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.resource.php\" target=\"_blank\">resource<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>","<a data-custom-type=\"storage\/storageobject\">Google\\Cloud\\Storage\\StorageObject<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.detectGcsUri","description":"<p>When providing $audio as a string, this flag determines whether or not to attempt to detect if the string represents a Google Cloud Storage URI in the format of <code>gs:\/\/{bucket-name}\/{object-name}<\/code>. <strong>Defaults to<\/strong> <code>true<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.languageCode","description":"<p>The language of the content. BCP-47 (e.g., <code>\"en-US\"<\/code>, <code>\"es-ES\"<\/code>) language codes are accepted. See <a href=\"https:\/\/cloud.google.com\/speech\/docs\/languages\">Language Support<\/a> for a list of the currently supported language codes. This value will be required if a default has not been set on the client. <strong>Defaults to<\/strong> the value set on the client.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.sampleRateHertz","description":"<p>Sample rate in Hertz of the provided audio. Valid values are: 8000-48000. 16000 is optimal. For best results, set the sampling rate of the audio source to 16000 Hz. If that's not possible, use the native sample rate of the audio source (instead of re-sampling). For .flac and .wav files the Speech API will make a best effort to read the sample rate from the file's headers.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.encoding","description":"<p>Encoding of the provided audio. May be one of <code>\"LINEAR16\"<\/code>, <code>\"FLAC\"<\/code>, <code>\"MULAW\"<\/code>, <code>\"AMR\"<\/code>, <code>\"AMR_WB\"<\/code>. For .flac and .wav files the Speech API will make a best effort to determine the encoding type from the file's headers.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.maxAlternatives","description":"<p>Maximum number of alternatives to be returned. Valid values are 1-30. <strong>Defaults to<\/strong> <code>1<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.profanityFilter","description":"<p>If set to <code>true<\/code>, the server will attempt to filter out profanities, replacing all but the initial character in each filtered word with asterisks, e.g. \\&quot;f*<strong>\\&quot;. <\/strong>Defaults to** <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.speechContexts","description":"<p>A list of arrays where each element must contain a key <code>phrases<\/code>. Each key <code>phrases<\/code> should contain an array of strings which provide &quot;hints&quot; to the speech recognizer to favor specific words and phrases in the results. Please see <a href=\"https:\/\/cloud.google.com\/speech\/reference\/rest\/v1\/RecognitionConfig#SpeechContext\">SpeechContext<\/a> for more information.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.enableWordTimeOffsets","description":"<p>If set to <code>true<\/code>, a list of <code>wordTimeOffsets<\/code> are returned with the top alternative. If <code>false<\/code> or omitted, no <code>wordTimeOffsets<\/code> are returned. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["<a data-custom-type=\"speech\/operation\">Google\\Cloud\\Speech\\Operation<\/a>"],"description":""}]},{"id":"operation","type":"instance","name":"operation","source":"Speech\/src\/SpeechClient.php#L377","description":"<p>Lazily instantiates an operation. There are no network requests made at\nthis point. To see the operations that can be performed on an operation\nplease see <a data-custom-type=\"speech\/operation\">Google\\Cloud\\Speech\\Operation<\/a>.<\/p>","examples":[{"caption":"<p>Access an existing operation by its server generated name.<\/p>","code":"$operation = $speech->operation($operationName);"}],"resources":[],"params":[{"name":"name","description":"<p>The name of the operation to request.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"speech\/operation\">Google\\Cloud\\Speech\\Operation<\/a>"],"description":""}]}]}