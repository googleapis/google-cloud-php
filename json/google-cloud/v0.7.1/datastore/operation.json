{"id":"datastore\/operation","type":"class","title":"Google\\Cloud\\Datastore\\Operation","name":"Operation","description":"<p>Run lookups and queries and commit changes.<\/p>\n<p>This class is used by <a data-custom-type=\"datastore\/datastoreclient\">Google\\Cloud\\Datastore\\DatastoreClient<\/a>\nand <a data-custom-type=\"datastore\/transaction\">Google\\Cloud\\Datastore\\Transaction<\/a> and is not intended to be used\ndirectly.<\/p>\n<p>Examples are omitted for brevity. Detailed usage examples can be found in\n<a data-custom-type=\"datastore\/datastoreclient\">Google\\Cloud\\Datastore\\DatastoreClient<\/a> and\n<a data-custom-type=\"datastore\/transaction\">Google\\Cloud\\Datastore\\Transaction<\/a>.<\/p>","examples":[],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"\/src\/Datastore\/Operation.php#L72","description":"<p>Create an operation<\/p>","examples":[],"resources":[],"params":[{"name":"connection","description":"<p>A connection to Google Cloud Platform's Datastore API.<\/p>","types":["<a data-custom-type=\"datastore\/connection\/connectioninterface\">Google\\Cloud\\Datastore\\Connection\\ConnectionInterface<\/a>"],"optional":null,"nullable":null},{"name":"projectId","description":"<p>The Google Cloud Platform project ID.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"namespaceId","description":"<p>The namespace to use for all service requests.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[]},{"id":"key","type":"instance","name":"key","source":"\/src\/Datastore\/Operation.php#L103","description":"<p>Create a single Key instance<\/p>","examples":[],"resources":[{"title":"Key","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key"},{"title":"PathElement","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key#PathElement"}],"params":[{"name":"kind","description":"<p>The kind.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"identifier","description":"<p>The ID or name.<\/p>","types":["string","int"],"optional":null,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options.identifierType","description":"<p>If omitted, type will be determined internally. In cases where any ambiguity can be expected (i.e. if you want to create keys with <code>name<\/code> but your values may pass PHP's <code>is_numeric()<\/code> check), this value may be explicitly set using <code>Key::TYPE_ID<\/code> or <code>Key::TYPE_NAME<\/code>.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>"],"description":""}]},{"id":"keys","type":"instance","name":"keys","source":"\/src\/Datastore\/Operation.php#L141","description":"<p>Create multiple keys with the same configuration.<\/p>\n<p>When inserting multiple entities, creating a set of keys at once can be\nuseful. By defining the Key's kind and any ancestors up front, and\nallowing Cloud Datastore to allocate IDs, you can be sure that your\nentity identity and ancestry are correct and that there will be no\ncollisions during the insert operation.<\/p>","examples":[],"resources":[{"title":"Key","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key"},{"title":"PathElement","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key#PathElement"}],"params":[{"name":"kind","description":"<p>The kind to use in the final path element.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options.ancestors","description":"<p>An array of <a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Key#PathElement\">PathElement<\/a> arrays. Use to create <a href=\"https:\/\/cloud.google.com\/datastore\/docs\/concepts\/entities#ancestor_paths\">ancestor paths<\/a>.<\/p>","types":["array[]"],"optional":null,"nullable":null},{"name":"options.number","description":"<p>The number of keys to generate.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.id","description":"<p>The ID for the last pathElement.<\/p>","types":["string","int"],"optional":null,"nullable":null},{"name":"options.name","description":"<p>The Name for the last pathElement.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/key[]\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"description":""}]},{"id":"entity","type":"instance","name":"entity","source":"\/src\/Datastore\/Operation.php#L203","description":"<p>Create an entity<\/p>\n<p>This method does not execute any service requests.<\/p>\n<p>Entities are created with a Datastore Key, or by specifying a Kind. Kinds\nare only allowed for insert operations. For any other case, you must\nspecify a complete key. If a kind is given, an ID will be automatically\nallocated for the entity upon insert. Additionally, if your entity\nrequires a complex key elementPath, you must create the key separately.<\/p>\n<p>In complex applications you may want to create your own entity types.\nGoogle Cloud PHP supports subclassing of <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>.\nIf the name of a subclass of Entity is given in the options array, an\ninstance of the subclass will be returned instead of Entity.<\/p>","examples":[],"resources":[{"title":"Entity","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/Entity"}],"params":[{"name":"key","description":"<p>The key used to identify the record, or a string $kind.<\/p>","types":["<a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>","string"],"optional":null,"nullable":null},{"name":"entity","description":"<p>The data to fill the entity with.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options.className","description":"<p>The name of a class extending <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>. If provided, an instance of that class will be returned instead of Entity. If not set, <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a> will be used.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.excludeFromIndexes","description":"<p>A list of entity keys to exclude from datastore indexes.<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["<a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>"],"description":""}]},{"id":"allocateIds","type":"instance","name":"allocateIds","source":"\/src\/Datastore\/Operation.php#L249","description":"<p>Allocate available IDs to a set of keys<\/p>\n<p>Keys MUST be in an incomplete state (i.e. including a kind but not an ID\nor name in their final pathElement).<\/p>\n<p>This method will execute a service request.<\/p>","examples":[],"resources":[{"title":"allocateIds","link":"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/projects\/allocateIds"}],"params":[{"name":"keys","description":"<p>The incomplete keys.<\/p>","types":["<a data-custom-type=\"datastore\/key[]\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"optional":null,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["<a data-custom-type=\"datastore\/key[]\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"description":""}]},{"id":"lookup","type":"instance","name":"lookup","source":"\/src\/Datastore\/Operation.php#L309","description":"<p>Lookup records by key<\/p>","examples":[],"resources":[],"params":[{"name":"key","description":"<p>The identifiers to look up.<\/p>","types":["<a data-custom-type=\"datastore\/key[]\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"optional":null,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options.readConsistency","description":"<p>If not in a transaction, set to STRONG or EVENTUAL, depending on default value in DatastoreClient. See <a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/ReadOptions#ReadConsistency\">ReadConsistency<\/a>.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.transaction","description":"<p>The transaction ID, if the query should be run in a transaction.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.className","description":"<p>If a string, the name of the class to return results as. Must be a subclass of <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>. If not set, <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a> will be used. If an array is given, it must be an associative array, where the key is a Kind and the value is the name of a subclass of <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>.<\/p>","types":["string","array"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["array"],"description":"<p>Returns an array with keys [<code>found<\/code>, <code>missing<\/code>, and <code>deferred<\/code>].\nMembers of <code>found<\/code> will be instance of\n<a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>. Members of <code>missing<\/code> and\n<code>deferred<\/code> will be instance of <a data-custom-type=\"datastore\/key\">Google\\Cloud\\Datastore\\Key<\/a>.<\/p>"}]},{"id":"runQuery","type":"instance","name":"runQuery","source":"\/src\/Datastore\/Operation.php#L385","description":"<p>Run a query and return entities<\/p>","examples":[],"resources":[],"params":[{"name":"query","description":"<p>The query object.<\/p>","types":["<a data-custom-type=\"datastore\/query\/queryinterface\">Google\\Cloud\\Datastore\\Query\\QueryInterface<\/a>"],"optional":null,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options.transaction","description":"<p>The transaction ID, if the query should be run in a transaction.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.className","description":"<p>The name of the class to return results as. Must be a subclass of <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>. If not set, <a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a> will be used.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.readConsistency","description":"<p>If not in a transaction, set to STRONG or EVENTUAL, depending on default value in DatastoreClient. See <a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/ReadOptions#ReadConsistency\">ReadConsistency<\/a>.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["Generator&lt;<a data-custom-type=\"datastore\/entity\">Google\\Cloud\\Datastore\\Entity<\/a>&gt;"],"description":""}]},{"id":"commit","type":"instance","name":"commit","source":"\/src\/Datastore\/Operation.php#L437","description":"<p>Commit all mutations<\/p>\n<p>Calling this method will end the operation (and close the transaction,\nif one is specified).<\/p>","examples":[],"resources":[],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options.transaction","description":"<p>The transaction ID, if the query should be run in a transaction.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["array"],"description":"<p><a href=\"https:\/\/cloud.google.com\/datastore\/reference\/rest\/v1\/projects\/commit#response-body\">Response Body<\/a><\/p>"}]},{"id":"allocateIdsToEntities","type":"instance","name":"allocateIdsToEntities","source":"\/src\/Datastore\/Operation.php#L463","description":"<p>Patch any incomplete keys in the given array of entities<\/p>\n<p>Any incomplete keys will be allocated an ID. Complete keys in the input\nwill remain unchanged.<\/p>","examples":[],"resources":[],"params":[{"name":"entities","description":"<p>A list of entities<\/p>","types":["<a data-custom-type=\"datastore\/entity[]\">Google\\Cloud\\Datastore\\Entity[]<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"datastore\/entity[]\">Google\\Cloud\\Datastore\\Entity[]<\/a>"],"description":""}]},{"id":"mutate","type":"instance","name":"mutate","source":"\/src\/Datastore\/Operation.php#L502","description":"<p>Enqueue a mutation<\/p>\n<p>A mutation is a change to the datastore. Create, Update and Delete are\nexamples of mutations, while Read is not.<\/p>\n<p>Google Cloud Datastore supports multiple mutations in a single API call,\nsubject to the limits of the service. Adding mutations separately from\ncommitting the changes allows you to create complex operations, both\ninside a transaction and not.<\/p>","examples":[],"resources":[{"title":"Limits","link":"https:\/\/cloud.google.com\/datastore\/docs\/concepts\/limits"}],"params":[{"name":"operation","description":"<p>The operation to execute. &quot;Insert&quot;, &quot;Upsert&quot;,\n&quot;Update&quot; or &quot;Delete&quot;.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"input","description":"<p>The entities or keys to mutate.<\/p>","types":["<a data-custom-type=\"datastore\/entity[]\">Google\\Cloud\\Datastore\\Entity[]<\/a>","<a data-custom-type=\"datastore\/key[]\">Google\\Cloud\\Datastore\\Key[]<\/a>"],"optional":null,"nullable":null},{"name":"type","description":"<p>The type of the input array.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"baseVersion","description":"<p>The version of the entity that this mutation\nis being applied to. If this does not match the current version on\nthe server, the mutation conflicts.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["void"],"description":""}]},{"id":"checkOverwrite","type":"instance","name":"checkOverwrite","source":"\/src\/Datastore\/Operation.php#L540","description":"<p>Check whether an update or upsert operation may proceed safely<\/p>","examples":[],"resources":[],"params":[{"name":"entities","description":"<p>the entities to be updated or upserted.<\/p>","types":["<a data-custom-type=\"datastore\/entity[]\">Google\\Cloud\\Datastore\\Entity[]<\/a>"],"optional":null,"nullable":null},{"name":"allowOverwrite","description":"<p><code>false<\/code> by default. If <code>true<\/code>, safety will\nbe disregarded.<\/p>","types":["bool"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["void"],"description":""}]}]}