{"id":"pubsub\/subscription","type":"","title":"Google\\Cloud\\PubSub\\Subscription","name":"Subscription","description":"<p>A named resource representing the stream of messages from a single, specific\ntopic, to be delivered to the subscribing application.<\/p>","examples":[{"caption":"<p>Create subscription through a topic<\/p>","code":"use Google\\Cloud\\PubSub\\PubSubClient;\n\n$pubsub = new PubSubClient();\n\n$topic = $pubsub->topic('my-new-topic');\n\n$subscription = $topic->subscription('my-new-subscription');"},{"caption":"<p>Create subscription through PubSubClient<\/p>","code":"use Google\\Cloud\\PubSub\\PubSubClient;\n\n$pubsub = new PubSubClient();\n\n$subscription = $pubsub->subscription(\n    'my-new-subscription',\n    'my-new-topic'\n);"},{"caption":"<p>Consuming messages received via push with JWT Authentication.<\/p>","code":"use Google\\Auth\\AccessToken;\n\n\/\/ Remove the `Bearer ` prefix from the token.\n\/\/ If using another request manager such as Symfony HttpFoundation,\n\/\/ use `Authorization` as the header name, e.g. `$request->headers->get('Authorization')`.\n$jwt = explode(' ', $_SERVER['HTTP_AUTHORIZATION'])[1];\n\n\/\/ Using the Access Token utility requires installation of the `phpseclib\/phpseclib` dependency at version 2.\n$accessTokenUtility = new AccessToken();\n$payload = $accessTokenUtility->verify($jwt);\nif (!$payload) {\n    throw new \\RuntimeException('Could not verify token!');\n}\n\necho 'Authenticated using ' . $payload['email'];"}],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"PubSub\/src\/Subscription.php#L137","description":"<p>Create a Subscription.<\/p>\n<p>The idiomatic way to use this class is through the PubSubClient or Topic,\nbut you can instantiate it directly as well.<\/p>","examples":[],"resources":[],"params":[{"name":"connection","description":"<p>The service connection object<\/p>","types":["<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/connection\/connectioninterface\">Google\\Cloud\\PubSub\\Connection\\ConnectionInterface<\/a>"],"optional":false,"nullable":null},{"name":"projectId","description":"<p>The current project<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"name","description":"<p>The subscription name<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"topicName","description":"<p>The topic name the subscription is attached to<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"encode","description":"<p>Whether messages are encrypted or not.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":false,"nullable":null},{"name":"info","description":"<p>Subscription info. Used to pre-populate the object.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[]},{"id":"name","type":"instance","name":"name","source":"PubSub\/src\/Subscription.php#L177","description":"<p>Get the subscription name<\/p>","examples":[{"caption":"","code":"echo $subscription->name();"}],"resources":[],"params":[],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"description":""}]},{"id":"detached","type":"instance","name":"detached","source":"PubSub\/src\/Subscription.php#L201","description":"<p>Indicates whether the subscription is detached from its topic.<\/p>\n<p>Detached subscriptions don't receive messages from their topic and don't\nretain any backlog. <code>Pull<\/code> and <code>StreamingPull<\/code> requests will return\nFAILED_PRECONDITION. If the subscription is a push subscription, pushes\nto the endpoint will not be made.<\/p>","examples":[{"caption":"","code":"$detached = $subscription->detached();\nif ($detached) {\n    echo \"The subscription is detached\";\n}"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"description":""}]},{"id":"create","type":"instance","name":"create","source":"PubSub\/src\/Subscription.php#L326","description":"<p>Execute a service request creating the subscription.<\/p>\n<p>The suggested way of creating a subscription is by calling through\n<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/topic\" data-method=\"subscribe\">Google\\Cloud\\PubSub\\Topic::subscribe()<\/a> or <a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/topic\" data-method=\"subscription\">Google\\Cloud\\PubSub\\Topic::subscription()<\/a>.<\/p>\n<p>Returns subscription info in the format detailed in the documentation\nfor a <a href=\"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions#Subscription\">subscription<\/a>.<\/p>\n<p><strong>NOTE: Some methods of instantiation of a Subscription do not supply a\ntopic name. The topic name is required to create a subscription.<\/strong><\/p>","examples":[{"caption":"","code":"$topic = $pubsub->topic('my-new-topic');\n\n$subscription = $topic->subscription('my-new-subscription');\n$result = $subscription->create();"}],"resources":[{"title":"Create Subscription","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/create"}],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.ackDeadlineSeconds","description":"<p>The maximum time after a subscriber receives a message before the subscriber should acknowledge the message.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.deadLetterPolicy","description":"<p>A policy that specifies the conditions for dead lettering messages in this subscription. If deadLetterPolicy is not set, dead lettering is disabled. The Cloud Pub\/Sub service account associated with this subscriptions's parent project (i.e., service-{project_number}@gcp-sa-pubsub.iam.gserviceaccount.com) must have permission to acknowledge messages on this subscription.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.deadLetterPolicy.deadLetterTopic","description":"<p>The topic, or name of the topic to which dead letter messages should be published. Strings must be of format <code>projects\/{project}\/topics\/{topic}<\/code>. The Cloud Pub\/Sub service account associated with the enclosing subscription's parent project (i.e., service-{project_number}@gcp-sa-pubsub.iam.gserviceaccount.com) must have permission to publish to this topic. The operation will fail if the topic does not exist. Users should ensure that there is a subscription attached to this topic since messages published to a topic with no subscriptions are lost.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>","<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/topic\">Google\\Cloud\\PubSub\\Topic<\/a>"],"optional":null,"nullable":null},{"name":"options.deadLetterPolicy.maxDeliveryAttempts","description":"<p>The maximum number of delivery attempts for any message. The value must be between 5 and 100.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"options.enableMessageOrdering","description":"<p>If true, messages published with the same <code>orderingKey<\/code> in <a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/message\">Google\\Cloud\\PubSub\\Message<\/a> will be delivered to the subscribers in the order in which they are received by the Pub\/Sub system. Otherwise, they may be delivered in any order.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.expirationPolicy","description":"<p>A policy that specifies the conditions for resource expiration (i.e., automatic resource deletion).<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.expirationPolicy.ttl","description":"<p>Specifies the &quot;time-to-live&quot; duration for an associated resource. The resource expires if it is not active for a period of <code>ttl<\/code>. The definition of &quot;activity&quot; depends on the type of the associated resource. The minimum and maximum allowed values for <code>ttl<\/code> depend on the type of the associated resource, as well. If <code>ttl<\/code> is not set, the associated resource never expires. If a string is provided, it should be as a duration in seconds with up to nine fractional digits, terminated by 's', e.g &quot;3.5s&quot;.<\/p>","types":["<a data-custom-type=\"cloud-core\/v1.39.0\/core\/duration\">Google\\Cloud\\Core\\Duration<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.filter","description":"<p>An expression written in the Pub\/Sub <a href=\"https:\/\/cloud.google.com\/pubsub\/docs\/filtering\">filter language<\/a>. If non-empty, then only messages whose <code>attributes<\/code> field matches the filter are delivered on this subscription. If empty, then no messages are filtered out. Filtering can only be configured at subscription creation.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.messageRetentionDuration","description":"<p>How long to retain unacknowledged messages in the subscription's backlog, from the moment a message is published. If <code>$retainAckedMessages<\/code> is true, then this also configures the retention of acknowledged messages, and thus configures how far back in time a <code>Seek<\/code> can be done. Cannot be more than 7 days or less than 10 minutes. <strong>Defaults to<\/strong> 7 days.<\/p>","types":["<a data-custom-type=\"cloud-core\/v1.39.0\/core\/duration\">Google\\Cloud\\Core\\Duration<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.pushConfig.attributes","description":"<p>Endpoint configuration attributes.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.pushConfig.oidcToken","description":"<p>If specified, Pub\/Sub will generate and attach an OIDC JWT token as an <code>Authorization<\/code> header in the HTTP request for every pushed message.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.pushConfig.oidcToken.audience","description":"<p>Audience to be used when generating OIDC token. The audience claim identifies the recipients that the JWT is intended for. The audience value is a single case-sensitive string. Having multiple values (array) for the audience field is not supported. More info about the OIDC JWT token audience here: <a href=\"https:\/\/tools.ietf.org\/html\/rfc7519#section-4.1.3\">https:\/\/tools.ietf.org\/html\/rfc7519#section-4.1.3<\/a> Note: if not specified, the Push endpoint URL will be used.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.pushConfig.oidcToken.serviceAccountEmail","description":"<p>Service account email to be used for generating the OIDC token. The caller (for <code>subscriptions.create<\/code>, <code>UpdateSubscription<\/code>, and <code>subscriptions.modifyPushConfig<\/code> RPCs) must have the <code>iam.serviceAccounts.actAs<\/code> permission for the service account.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.pushConfig.pushEndpoint","description":"<p>A URL locating the endpoint to which messages should be pushed. For example, a Webhook endpoint might use &quot;<a href=\"https:\/\/example.com\/push\">https:\/\/example.com\/push<\/a>&quot;.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.retainAckedMessages","description":"<p>Indicates whether to retain acknowledged messages.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.retryPolicy","description":"<p>A policy that specifies how Cloud Pub\/Sub retries message delivery for this subscription. If not set, the default retry policy is applied. This generally means that messages will be retried as soon as possible for healthy subscribers. Retry Policy will be triggered on NACKs or acknowledgement deadline exceeded events for a given message. Retry Policies are implemented on a best effort basis At times, the delay between deliveries may not match the configuration. That is, the delay can be more or less than the configured backoff.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options.retryPolicy.minimumBackoff","description":"<p>The minimum delay between consecutive deliveries of a given message. Value should be between 0 and 600 seconds. Defaults to 10 seconds.<\/p>","types":["<a data-custom-type=\"cloud-core\/v1.39.0\/core\/duration\">Google\\Cloud\\Core\\Duration<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options.retryPolicy.maximumBackoff","description":"<p>The maximum delay between consecutive deliveries of a given message. Value should be between 0 and 600 seconds. Defaults to 600 seconds.<\/p>","types":["<a data-custom-type=\"cloud-core\/v1.39.0\/core\/duration\">Google\\Cloud\\Core\\Duration<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null}],"exceptions":[{"type":"\\InvalidArgumentException","description":""}],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":"<p>An array of subscription info<\/p>"}]},{"id":"update","type":"instance","name":"update","source":"PubSub\/src\/Subscription.php#L481","description":"<p>Update the subscription.<\/p>\n<p>Note that subscription name and topic are immutable properties and may\nnot be modified.<\/p>","examples":[{"caption":"","code":"$subscription->update([\n    'retainAckedMessages' => true\n]);"},{"caption":"<p>Updating labels and push config attributes with explicit update masks.<\/p>","code":"$subscription->update([\n    'labels' => [\n        'label-1' => 'value'\n    ],\n    'pushConfig' => [\n        'attributes' => [\n            'x-goog-version' => 1\n        ]\n    ]\n], [\n    'updateMask' => [\n        'labels',\n        'pushConfig.attributes'\n    ]\n]);"}],"resources":[{"title":"UpdateSubscriptionRequest","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/UpdateSubscriptionRequest"}],"params":[{"name":"subscription","description":"<p>The Subscription data.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"subscription.ackDeadlineSeconds","description":"<p>The maximum time after a subscriber receives a message before the subscriber should acknowledge the message.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"subscription.deadLetterPolicy","description":"<p>A policy that specifies the conditions for dead lettering messages in this subscription. If deadLetterPolicy is not set, dead lettering is disabled. The Cloud Pub\/Sub service account associated with this subscriptions's parent project (i.e., service-{project_number}@gcp-sa-pubsub.iam.gserviceaccount.com) must have permission to acknowledge messages on this subscription.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"subscription.deadLetterPolicy.deadLetterTopic","description":"<p>The topic, or name of the topic to which dead letter messages should be published. Strings must be of format <code>projects\/{project}\/topics\/{topic}<\/code>. The Cloud Pub\/Sub service account associated with the enclosing subscription's parent project (i.e., service-{project_number}@gcp-sa-pubsub.iam.gserviceaccount.com) must have permission to publish to this topic. The operation will fail if the topic does not exist. Users should ensure that there is a subscription attached to this topic since messages published to a topic with no subscriptions are lost.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>","<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/topic\">Google\\Cloud\\PubSub\\Topic<\/a>"],"optional":null,"nullable":null},{"name":"subscription.deadLetterPolicy.maxDeliveryAttempts","description":"<p>The maximum number of delivery attempts for any message. The value must be between 5 and 100.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null},{"name":"subscription.enableMessageOrdering","description":"<p>If true, messages published with the same <code>orderingKey<\/code> in <a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/message\">Google\\Cloud\\PubSub\\Message<\/a> will be delivered to the subscribers in the order in which they are received by the Pub\/Sub system. Otherwise, they may be delivered in any order.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"subscription.expirationPolicy","description":"<p>A policy that specifies the conditions for resource expiration (i.e., automatic resource deletion).<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"subscription.expirationPolicy.ttl","description":"<p>Specifies the &quot;time-to-live&quot; duration for an associated resource. The resource expires if it is not active for a period of <code>ttl<\/code>. The definition of &quot;activity&quot; depends on the type of the associated resource. The minimum and maximum allowed values for <code>ttl<\/code> depend on the type of the associated resource, as well. If <code>ttl<\/code> is not set, the associated resource never expires. If a string is provided, it should be as a duration in seconds with up to nine fractional digits, terminated by 's', e.g &quot;3.5s&quot;.<\/p>","types":["<a data-custom-type=\"cloud-core\/v1.39.0\/core\/duration\">Google\\Cloud\\Core\\Duration<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"subscription.messageRetentionDuration","description":"<p>How long to retain unacknowledged messages in the subscription's backlog, from the moment a message is published. If <code>$retainAckedMessages<\/code> is true, then this also configures the retention of acknowledged messages, and thus configures how far back in time a <code>Seek<\/code> can be done. Cannot be more than 7 days or less than 10 minutes. <strong>Defaults to<\/strong> 7 days.<\/p>","types":["<a data-custom-type=\"cloud-core\/v1.39.0\/core\/duration\">Google\\Cloud\\Core\\Duration<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"subscription.pushConfig.attributes","description":"<p>Endpoint configuration attributes.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"subscription.pushConfig.oidcToken","description":"<p>If specified, Pub\/Sub will generate and attach an OIDC JWT token as an <code>Authorization<\/code> header in the HTTP request for every pushed message.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"subscription.pushConfig.oidcToken.audience","description":"<p>Audience to be used when generating OIDC token. The audience claim identifies the recipients that the JWT is intended for. The audience value is a single case-sensitive string. Having multiple values (array) for the audience field is not supported. More info about the OIDC JWT token audience here: <a href=\"https:\/\/tools.ietf.org\/html\/rfc7519#section-4.1.3\">https:\/\/tools.ietf.org\/html\/rfc7519#section-4.1.3<\/a> Note: if not specified, the Push endpoint URL will be used.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"subscription.pushConfig.oidcToken.serviceAccountEmail","description":"<p>Service account email to be used for generating the OIDC token. The caller (for <code>subscriptions.create<\/code>, <code>UpdateSubscription<\/code>, and <code>subscriptions.modifyPushConfig<\/code> RPCs) must have the <code>iam.serviceAccounts.actAs<\/code> permission for the service account.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"subscription.pushConfig.pushEndpoint","description":"<p>A URL locating the endpoint to which messages should be pushed. For example, a Webhook endpoint might use &quot;<a href=\"https:\/\/example.com\/push\">https:\/\/example.com\/push<\/a>&quot;.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"subscription.retainAckedMessages","description":"<p>Indicates whether to retain acknowledged messages.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"subscription.retryPolicy","description":"<p>A policy that specifies how Cloud Pub\/Sub retries message delivery for this subscription. If not set, the default retry policy is applied. This generally means that messages will be retried as soon as possible for healthy subscribers. Retry Policy will be triggered on NACKs or acknowledgement deadline exceeded events for a given message. Retry Policies are implemented on a best effort basis At times, the delay between deliveries may not match the configuration. That is, the delay can be more or less than the configured backoff.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"subscription.retryPolicy.minimumBackoff","description":"<p>The minimum delay between consecutive deliveries of a given message. Value should be between 0 and 600 seconds. Defaults to 10 seconds.<\/p>","types":["<a data-custom-type=\"cloud-core\/v1.39.0\/core\/duration\">Google\\Cloud\\Core\\Duration<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"subscription.retryPolicy.maximumBackoff","description":"<p>The maximum delay between consecutive deliveries of a given message. Value should be between 0 and 600 seconds. Defaults to 600 seconds.<\/p>","types":["<a data-custom-type=\"cloud-core\/v1.39.0\/core\/duration\">Google\\Cloud\\Core\\Duration<\/a>","<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.updateMask","description":"<p>A list of field paths to be modified. Nested key names should be dot-separated, e.g. <code>pushConfig.pushEndpoint<\/code>. Google Cloud PHP will attempt to infer this value on your behalf, however modification of map fields with arbitrary keys (such as labels or push config attributes) requires an explicit update mask.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":"<p>The subscription info.<\/p>"}]},{"id":"delete","type":"instance","name":"delete","source":"PubSub\/src\/Subscription.php#L535","description":"<p>Delete a subscription<\/p>","examples":[{"caption":"","code":"$subscription->delete();"}],"resources":[{"title":"Delete Subscription","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/delete"}],"params":[{"name":"options","description":"<p>Configuration Options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"exists","type":"instance","name":"exists","source":"PubSub\/src\/Subscription.php#L563","description":"<p>Check if a subscription exists.<\/p>\n<p>Service errors will NOT bubble up from this method. It will always return\na boolean value. If you want to check for errors, use\n<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/subscription\" data-method=\"info\">Google\\Cloud\\PubSub\\Subscription::info()<\/a>.<\/p>\n<p>If you need to re-check the existence of a subscription that is already\ndownloaded, call <a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/subscription\" data-method=\"reload\">Google\\Cloud\\PubSub\\Subscription::reload()<\/a> first\nto refresh the cached information.<\/p>","examples":[{"caption":"","code":"if ($subscription->exists()) {\n    echo 'Subscription exists!';\n}"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"description":""}]},{"id":"info","type":"instance","name":"info","source":"PubSub\/src\/Subscription.php#L590","description":"<p>Get info on a subscription<\/p>\n<p>If the info is already cached on the object, it will return that result.\nTo fetch a fresh result, use <a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/subscription\" data-method=\"reload\">Google\\Cloud\\PubSub\\Subscription::reload()<\/a>.<\/p>","examples":[{"caption":"","code":"$info = $subscription->info();\necho $info['name']; \/\/ `projects\/my-awesome-project\/subscriptions\/my-new-subscription`"}],"resources":[{"title":"Get Subscription","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/get"}],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":"<p>Subscription data<\/p>"}]},{"id":"reload","type":"instance","name":"reload","source":"PubSub\/src\/Subscription.php#L617","description":"<p>Retrieve info on a subscription from the API.<\/p>\n<p>To use the previously cached result (if it exists), use\n@see Subscription::info().<\/p>","examples":[{"caption":"","code":"$subscription->reload();\n$info = $subscription->info();\necho $info['name']; \/\/ `projects\/my-awesome-project\/subscriptions\/my-new-subscription`"}],"resources":[{"title":"Get Subscription","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/get"}],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":"<p>Subscription data<\/p>"}]},{"id":"pull","type":"instance","name":"pull","source":"PubSub\/src\/Subscription.php#L649","description":"<p>Retrieve new messages from the topic.<\/p>","examples":[{"caption":"","code":"$messages = $subscription->pull();\nforeach ($messages as $message) {\n    echo $message->data();\n}"}],"resources":[{"title":"Pull Subscriptions","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/pull"}],"params":[{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null},{"name":"options.returnImmediately","description":"<p>If true, the system will respond immediately, even if no messages are available. Otherwise, wait until new messages are available. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.boolean.php\" target=\"_blank\">bool<\/a>"],"optional":null,"nullable":null},{"name":"options.maxMessages","description":"<p>Limit the amount of messages pulled. <strong>Defaults to<\/strong> <code>1000<\/code>.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/message\">Google\\Cloud\\PubSub\\Message[]<\/a>"],"description":""}]},{"id":"acknowledge","type":"instance","name":"acknowledge","source":"PubSub\/src\/Subscription.php#L695","description":"<p>Acknowledge receipt of a message.<\/p>\n<p>Use <a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/subscription\" data-method=\"acknowledgeBatch\">Google\\Cloud\\PubSub\\Subscription::acknowledgeBatch()<\/a> to\nacknowledge multiple messages at once.<\/p>","examples":[{"caption":"","code":"$messages = $subscription->pull();\n\nforeach ($messages as $message) {\n    $subscription->acknowledge($message);\n}"}],"resources":[{"title":"Acknowledge Message","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/acknowledge"}],"params":[{"name":"message","description":"<p>A message object.<\/p>","types":["<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/message\">Google\\Cloud\\PubSub\\Message<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"acknowledgeBatch","type":"instance","name":"acknowledgeBatch","source":"PubSub\/src\/Subscription.php#L721","description":"<p>Acknowledge receipt of multiple messages at once.<\/p>\n<p>Use <a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/subscription\" data-method=\"acknowledge\">Google\\Cloud\\PubSub\\Subscription::acknowledge()<\/a> to acknowledge\na single message.<\/p>","examples":[{"caption":"","code":"$messages = $subscription->pull();\n\n$subscription->acknowledgeBatch($messages);"}],"resources":[{"title":"Acknowledge Message","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/acknowledge"}],"params":[{"name":"messages","description":"<p>An array of messages<\/p>","types":["<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/message\">Google\\Cloud\\PubSub\\Message[]<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"modifyAckDeadline","type":"instance","name":"modifyAckDeadline","source":"PubSub\/src\/Subscription.php#L766","description":"<p>Set the acknowledge deadline for a single ackId.<\/p>\n<p>Use <a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/subscription\" data-method=\"modifyAckDeadlineBatch\">Google\\Cloud\\PubSub\\Subscription::modifyAckDeadlineBatch()<\/a> to\nmodify the ack deadline for multiple messages at once.<\/p>","examples":[{"caption":"","code":"$messages = $subscription->pull();\n\nforeach ($messages as $message) {\n    $subscription->modifyAckDeadline($message, 3);\n    sleep(2);\n\n    \/\/ Now we'll acknowledge!\n    $subscription->acknowledge($message);\n\n    break;\n}"}],"resources":[{"title":"Modify Ack Deadline","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/modifyAckDeadline"}],"params":[{"name":"message","description":"<p>A message object<\/p>","types":["<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/message\">Google\\Cloud\\PubSub\\Message<\/a>"],"optional":false,"nullable":null},{"name":"seconds","description":"<p>The new ack deadline with respect to the time\nthis request was sent to the Pub\/Sub system. Must be &gt;= 0. For\nexample, if the value is 10, the new ack deadline will expire 10\nseconds after the ModifyAckDeadline call was made. Specifying\nzero may immediately make the message available for another pull\nrequest.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"modifyAckDeadlineBatch","type":"instance","name":"modifyAckDeadlineBatch","source":"PubSub\/src\/Subscription.php#L805","description":"<p>Set the acknowledge deadline for multiple ackIds.<\/p>\n<p>Use <a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/subscription\" data-method=\"modifyAckDeadline\">Google\\Cloud\\PubSub\\Subscription::modifyAckDeadline()<\/a> to\nmodify the ack deadline for a single message.<\/p>","examples":[{"caption":"","code":"$messages = $subscription->pull();\n\n\/\/ Set the ack deadline to three seconds from now for every message\n$subscription->modifyAckDeadlineBatch($messages, 3);\n\n\/\/ Delay execution, or make a sandwich or something.\nsleep(2);\n\n\/\/ Now we'll acknowledge\n$subscription->acknowledgeBatch($messages);"}],"resources":[{"title":"Modify Ack Deadline","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/modifyAckDeadline"}],"params":[{"name":"messages","description":"<p>An array of messages<\/p>","types":["<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/message\">Google\\Cloud\\PubSub\\Message[]<\/a>"],"optional":false,"nullable":null},{"name":"seconds","description":"<p>The new ack deadline with respect to the time\nthis request was sent to the Pub\/Sub system. Must be &gt;= 0. For\nexample, if the value is 10, the new ack deadline will expire 10\nseconds after the ModifyAckDeadline call was made. Specifying\nzero may immediately make the message available for another pull\nrequest.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.integer.php\" target=\"_blank\">int<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"modifyPushConfig","type":"instance","name":"modifyPushConfig","source":"PubSub\/src\/Subscription.php#L843","description":"<p>Set the push config for the subscription<\/p>","examples":[{"caption":"","code":"$subscription->modifyPushConfig([\n    'pushEndpoint' => 'https:\/\/www.example.com\/foo\/bar'\n]);"}],"resources":[{"title":"Modify Push Config","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/modifyPushConfig"}],"params":[{"name":"pushConfig","description":"<p>Push delivery configuration. See\n<a href=\"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions#PushConfig\">PushConfig<\/a>\nfor more details.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null},{"name":"pushConfig.pushEndpoint","description":"<p>A URL locating the endpoint to which messages should be pushed. For example, a Webhook endpoint might use &quot;<a href=\"https:\/\/example.com\/push\">https:\/\/example.com\/push<\/a>&quot;.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":null,"nullable":null},{"name":"pushConfig.attributes","description":"<p>Endpoint configuration attributes.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":null,"nullable":null},{"name":"options","description":"<p>Configuration Options<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"seekToTime","type":"instance","name":"seekToTime","source":"PubSub\/src\/Subscription.php#L870","description":"<p>Seek to a given timestamp.<\/p>\n<p>When you seek to a time, it has the effect of marking every message\nreceived before this time as acknowledged, and all messages received\nafter the time as unacknowledged.<\/p>\n<p>Please note that this method may not yet be available in your project.<\/p>","examples":[{"caption":"","code":"$time = $pubsub->timestamp(new \\DateTime('2017-04-01'));\n$subscription->seekToTime($time);"}],"resources":[],"params":[{"name":"timestamp","description":"<p>The time to seek to.<\/p>","types":["<a data-custom-type=\"cloud-core\/v1.39.0\/core\/timestamp\">Google\\Cloud\\Core\\Timestamp<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"seekToSnapshot","type":"instance","name":"seekToSnapshot","source":"PubSub\/src\/Subscription.php#L896","description":"<p>Seek to a given snapshot.<\/p>\n<p>When seeking to a snapshot, any message that had an &quot;unacknowledged&quot;\nstate when the snapshot was created can be re-delivered.<\/p>\n<p>Please note that this method may not yet be available in your project.<\/p>","examples":[{"caption":"","code":"$snapshot = $pubsub->snapshot('my-snapshot');\n$subscription->seekToSnapshot($snapshot);"}],"resources":[],"params":[{"name":"snapshot","description":"<p>The snapshot to seek to.<\/p>","types":["<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/snapshot\">Google\\Cloud\\PubSub\\Snapshot<\/a>"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.pseudo-types.php#language.types.void\" target=\"_blank\">void<\/a>"],"description":""}]},{"id":"detach","type":"instance","name":"detach","source":"PubSub\/src\/Subscription.php#L919","description":"<p>Detach the subscription from its topic.<\/p>\n<p>All messages retained in the subscription are dropped. Subsequent <code>Pull<\/code>\nrequests will return FAILED_PRECONDITION. If the subscription is a push\nsubscription, pushes to the endpoint will stop.<\/p>","examples":[{"caption":"","code":"$subscription->detach();"}],"resources":[],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":true,"nullable":null}],"exceptions":[],"returns":[{"types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"description":""}]},{"id":"iam","type":"instance","name":"iam","source":"PubSub\/src\/Subscription.php#L943","description":"<p>Manage the IAM policy for the current Subscription.<\/p>","examples":[{"caption":"","code":"$iam = $subscription->iam();"}],"resources":[{"title":"PubSub Access Control Documentation","link":"https:\/\/cloud.google.com\/pubsub\/access_control"},{"title":"Get Subscription IAM Policy","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/getIamPolicy"},{"title":"Set Subscription IAM Policy","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/setIamPolicy"},{"title":"Test Subscription Permissions","link":"https:\/\/cloud.google.com\/pubsub\/docs\/reference\/rest\/v1\/projects.subscriptions\/testIamPermissions"}],"params":[],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"cloud-core\/v1.39.0\/core\/iam\/iam\">Google\\Cloud\\Core\\Iam\\Iam<\/a>"],"description":""}]}]}