{"id":"pubsub\/messagebuilder","type":"","title":"Google\\Cloud\\PubSub\\MessageBuilder","name":"MessageBuilder","description":"<p>Builds a PubSub Message.<\/p>\n<p>This class may be used to build an API-compliant message for publication.<\/p>\n<p>This class is immutable and each build method returns a new instance with\nyour changes applied.<\/p>\n<p>Note that messages are invalid unless they include a data field or at least\none attribute. Both may be provided, but omission of both will result in an\nerror.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\PubSub\\MessageBuilder;\nuse Google\\Cloud\\PubSub\\PubSubClient;\n\n$client = new PubSubClient();\n$topic = $client->topic($topicId);\n\n$builder = new MessageBuilder();\n$builder = $builder->setData('hello friend!')\n    ->addAttribute('from', 'Bob')\n    ->addAttribute('to', 'Jane');\n\n$topic->publish($builder->build());"}],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"PubSub\/src\/MessageBuilder.php#L62","description":"","examples":[],"resources":[],"params":[{"name":"message","description":"<p>The initial message data.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[]},{"id":"setData","type":"instance","name":"setData","source":"PubSub\/src\/MessageBuilder.php#L81","description":"<p>Set the message data.<\/p>\n<p>Do not base64-encode the value; If it must be encoded, the client will\ndo it on your behalf.<\/p>","examples":[{"caption":"","code":"$builder = $builder->setData('Hello friend!');"}],"resources":[],"params":[{"name":"data","description":"<p>The message data field.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/messagebuilder\">Google\\Cloud\\PubSub\\MessageBuilder<\/a>"],"description":""}]},{"id":"setAttributes","type":"instance","name":"setAttributes","source":"PubSub\/src\/MessageBuilder.php#L102","description":"<p>Set optional attributes for this message.<\/p>","examples":[{"caption":"","code":"$builder = $builder->setAttributes([\n    'from' => 'Bob'\n]);"}],"resources":[],"params":[{"name":"attributes","description":"<p>A set of key\/value pairs, where both key and\nvalue are strings.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.array.php\" target=\"_blank\">array<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/messagebuilder\">Google\\Cloud\\PubSub\\MessageBuilder<\/a>"],"description":""}]},{"id":"addAttribute","type":"instance","name":"addAttribute","source":"PubSub\/src\/MessageBuilder.php#L121","description":"<p>Add a single attribute to the message.<\/p>","examples":[{"caption":"","code":"$builder = $builder->addAttribute('to', 'Jane');"}],"resources":[],"params":[{"name":"key","description":"<p>The attribute key.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null},{"name":"value","description":"<p>The attribute value.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/messagebuilder\">Google\\Cloud\\PubSub\\MessageBuilder<\/a>"],"description":""}]},{"id":"setOrderingKey","type":"instance","name":"setOrderingKey","source":"PubSub\/src\/MessageBuilder.php#L146","description":"<p>Set the message's ordering key.<\/p>","examples":[{"caption":"","code":"$builder = $builder->setOrderingKey('order');"}],"resources":[],"params":[{"name":"orderingKey","description":"<p>The ordering key.<\/p>","types":["<a href=\"http:\/\/php.net\/manual\/en\/language.types.string.php\" target=\"_blank\">string<\/a>"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/messagebuilder\">Google\\Cloud\\PubSub\\MessageBuilder<\/a>"],"description":""}]},{"id":"build","type":"instance","name":"build","source":"PubSub\/src\/MessageBuilder.php#L164","description":"<p>Build a message.<\/p>","examples":[{"caption":"","code":"$message = $builder->build();"}],"resources":[],"params":[],"exceptions":[{"type":"\\BadMethodCallException","description":"If required data is missing."}],"returns":[{"types":["<a data-custom-type=\"cloud-pubsub\/v1.28.0\/pubsub\/message\">Google\\Cloud\\PubSub\\Message<\/a>"],"description":""}]}]}