{"id":"bigquery\/bigqueryclient","type":"","title":"Google\\Cloud\\BigQuery\\BigQueryClient","name":"BigQueryClient","description":"<p>Google Cloud BigQuery allows you to create, manage, share and query data.<\/p>\n<p>Find more information at the\n<a href=\"https:\/\/cloud.google.com\/bigquery\/docs\">Google Cloud BigQuery Docs<\/a>.<\/p>","examples":[{"caption":"","code":"use Google\\Cloud\\BigQuery\\BigQueryClient;\n\n$bigQuery = new BigQueryClient();"}],"resources":[],"methods":[{"id":"__construct","type":"constructor","name":"__construct","source":"src\/BigQuery\/BigQueryClient.php#L92","description":"<p>Create a BigQuery client.<\/p>","examples":[],"resources":[],"params":[{"name":"config","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"config.projectId","description":"<p>The project ID from the Google Developer's Console.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"config.authCache","description":"<p>A cache for storing access tokens. <strong>Defaults to<\/strong> a simple in memory implementation.<\/p>","types":["CacheItemPoolInterface"],"optional":null,"nullable":null},{"name":"config.authCacheOptions","description":"<p>Cache configuration options.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"config.authHttpHandler","description":"<p>A handler used to deliver Psr7 requests specifically for authentication.<\/p>","types":["callable"],"optional":null,"nullable":null},{"name":"config.httpHandler","description":"<p>A handler used to deliver Psr7 requests. Only valid for requests sent over REST.<\/p>","types":["callable"],"optional":null,"nullable":null},{"name":"config.keyFile","description":"<p>The contents of the service account credentials .json file retrieved from the Google Developer's Console. Ex: <code>json_decode(file_get_contents($path), true)<\/code>.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"config.keyFilePath","description":"<p>The full path to your service account credentials .json file retrieved from the Google Developers Console.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"config.retries","description":"<p>Number of retries for a failed request. <strong>Defaults to<\/strong> <code>3<\/code>.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"config.scopes","description":"<p>Scopes to be used for the request.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"config.returnInt64AsObject","description":"<p>If true, 64 bit integers will be returned as a <a data-custom-type=\"cloud-core\/v1.5.0\/core\/int64\">Google\\Cloud\\Core\\Int64<\/a> object for 32 bit platform compatibility. <strong>Defaults to<\/strong> false.<\/p>","types":["bool"],"optional":null,"nullable":null}],"exceptions":[],"returns":[]},{"id":"runQuery","type":"instance","name":"runQuery","source":"src\/BigQuery\/BigQueryClient.php#L223","description":"<p>Runs a BigQuery SQL query in a synchronous fashion. Rows are returned\nimmediately as long as the query completes within a specified timeout. In\nthe case that the query does not complete in the specified timeout, you\nare able to poll the query's status until it is complete.<\/p>\n<p>Queries constructed using\n<a href=\"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/standard-sql\/\">standard SQL<\/a>\ncan take advantage of parametriziation.<\/p>\n<p>Refer to the table below for a guide on how parameter types are mapped to\ntheir BigQuery equivalents.<\/p>\n<table>\n<thead>\n<tr>\n<th><strong>PHP Type<\/strong><\/th>\n<th><strong>BigQuery Data Type<\/strong><\/th>\n<\/tr>\n<\/thead>\n<tbody>\n<tr>\n<td><code>\\DateTimeInterface<\/code><\/td>\n<td><code>DATETIME<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"bigquery\/bytes\">Google\\Cloud\\BigQuery\\Bytes<\/a><\/td>\n<td><code>BYTES<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"bigquery\/date\">Google\\Cloud\\BigQuery\\Date<\/a><\/td>\n<td><code>DATE<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"cloud-core\/v1.5.0\/core\/int64\">Google\\Cloud\\Core\\Int64<\/a><\/td>\n<td><code>INT64<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"bigquery\/time\">Google\\Cloud\\BigQuery\\Time<\/a><\/td>\n<td><code>TIME<\/code><\/td>\n<\/tr>\n<tr>\n<td><a data-custom-type=\"bigquery\/timestamp\">Google\\Cloud\\BigQuery\\Timestamp<\/a><\/td>\n<td><code>TIMESTAMP<\/code><\/td>\n<\/tr>\n<tr>\n<td>Associative Array<\/td>\n<td><code>STRUCT<\/code><\/td>\n<\/tr>\n<tr>\n<td>Non-Associative Array<\/td>\n<td><code>ARRAY<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>float<\/code><\/td>\n<td><code>FLOAT64<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>int<\/code><\/td>\n<td><code>INT64<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>string<\/code><\/td>\n<td><code>STRING<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>resource<\/code><\/td>\n<td><code>BYTES<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>bool<\/code><\/td>\n<td><code>BOOL<\/code><\/td>\n<\/tr>\n<tr>\n<td><code>object<\/code> (Outside types specified above)<\/td>\n<td><strong>ERROR<\/strong> <code>InvalidArgumentException<\/code><\/td>\n<\/tr>\n<\/tbody>\n<\/table>","examples":[{"caption":"","code":"$queryResults = $bigQuery->runQuery('SELECT commit FROM [bigquery-public-data:github_repos.commits] LIMIT 100');\n\n$isComplete = $queryResults->isComplete();\n\nwhile (!$isComplete) {\n    sleep(1); \/\/ let's wait for a moment...\n    $queryResults->reload(); \/\/ trigger a network request\n    $isComplete = $queryResults->isComplete(); \/\/ check the query's status\n}\n\nforeach ($queryResults->rows() as $row) {\n    echo $row['commit'];\n}"},{"caption":"<p>Construct a query utilizing named parameters.<\/p>","code":"$query = 'SELECT commit FROM `bigquery-public-data.github_repos.commits`' .\n         'WHERE author.date < @date AND message = @message LIMIT 100';\n$queryResults = $bigQuery->runQuery($query, [\n    'parameters' => [\n        'date' => $bigQuery->timestamp(new \\DateTime('1980-01-01 12:15:00Z')),\n        'message' => 'A commit message.'\n    ]\n]);\n\n$isComplete = $queryResults->isComplete();\n\nwhile (!$isComplete) {\n    sleep(1); \/\/ let's wait for a moment...\n    $queryResults->reload(); \/\/ trigger a network request\n    $isComplete = $queryResults->isComplete(); \/\/ check the query's status\n}\n\nforeach ($queryResults->rows() as $row) {\n    echo $row['commit'];\n}"},{"caption":"<p>Construct a query utilizing positional parameters.<\/p>","code":"$query = 'SELECT commit FROM `bigquery-public-data.github_repos.commits` WHERE message = ? LIMIT 100';\n$queryResults = $bigQuery->runQuery($query, [\n    'parameters' => ['A commit message.']\n]);\n\n$isComplete = $queryResults->isComplete();\n\nwhile (!$isComplete) {\n    sleep(1); \/\/ let's wait for a moment...\n    $queryResults->reload(); \/\/ trigger a network request\n    $isComplete = $queryResults->isComplete(); \/\/ check the query's status\n}\n\nforeach ($queryResults->rows() as $row) {\n    echo $row['commit'];\n}"}],"resources":[{"title":"Query API documentation.","link":"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/v2\/jobs\/query"}],"params":[{"name":"query","description":"<p>A BigQuery SQL query.<\/p>","types":["string"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.maxResults","description":"<p>The maximum number of rows to return per page of results. Setting this flag to a small value such as 1000 and then paging through results might improve reliability when the query result set is large.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.defaultDataset","description":"<p>Specifies the default datasetId and projectId to assume for any unqualified table names in the query. If not set, all table names in the query string must be qualified in the format 'datasetId.tableId'.<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options.timeoutMs","description":"<p>How long to wait for the query to complete, in milliseconds. <strong>Defaults to<\/strong> <code>10000<\/code> milliseconds (10 seconds).<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.useQueryCache","description":"<p>Whether to look for the result in the query cache.<\/p>","types":["bool"],"optional":null,"nullable":null},{"name":"options.useLegacySql","description":"<p>Specifies whether to use BigQuery's legacy SQL dialect for this query. <strong>Defaults to<\/strong> <code>true<\/code>. If set to false, the query will use <a href=\"https:\/\/cloud.google.com\/bigquery\/sql-reference\">BigQuery's standard SQL<\/a>.<\/p>","types":["bool"],"optional":null,"nullable":null},{"name":"options.parameters","description":"<p>Only available for standard SQL queries. When providing a non-associative array positional parameters (<code>?<\/code>) will be used. When providing an associative array named parameters will be used (<code>@name<\/code>).<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery\/queryresults\">Google\\Cloud\\BigQuery\\QueryResults<\/a>"],"description":""}]},{"id":"runQueryAsJob","type":"instance","name":"runQueryAsJob","source":"src\/BigQuery\/BigQueryClient.php#L289","description":"<p>Runs a BigQuery SQL query in an asynchronous fashion. Running a query\nin this fashion requires you to poll for the status before being able\nto access results.<\/p>\n<p>Queries constructed using\n<a href=\"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/standard-sql\/\">standard SQL<\/a>\ncan take advantage of parametriziation. For more details and examples\nplease see <a data-custom-type=\"bigquery\/bigqueryclient\" data-method=\"runQuery\">Google\\Cloud\\BigQuery\\BigQueryClient::runQuery()<\/a>.<\/p>","examples":[{"caption":"","code":"$job = $bigQuery->runQueryAsJob('SELECT commit FROM [bigquery-public-data:github_repos.commits] LIMIT 100');\n\n$isComplete = false;\n$queryResults = $job->queryResults();\n\nwhile (!$isComplete) {\n    sleep(1); \/\/ let's wait for a moment...\n    $queryResults->reload(); \/\/ trigger a network request\n    $isComplete = $queryResults->isComplete(); \/\/ check the query's status\n}\n\nforeach ($queryResults->rows() as $row) {\n    echo $row['commit'];\n}"}],"resources":[{"title":"Jobs insert API documentation.","link":"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/v2\/jobs\/insert"}],"params":[{"name":"query","description":"<p>A BigQuery SQL query.<\/p>","types":["string"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.parameters","description":"<p>Only available for standard SQL queries. When providing a non-associative array positional parameters (<code>?<\/code>) will be used. When providing an associative array named parameters will be used (<code>@name<\/code>).<\/p>","types":["array"],"optional":null,"nullable":null},{"name":"options.jobConfig","description":"<p>Configuration settings for a query job are outlined in the <a href=\"https:\/\/goo.gl\/PuRa3I\">API Docs for <code>configuration.query<\/code><\/a>. If not provided default settings will be used.<\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery\/job\">Google\\Cloud\\BigQuery\\Job<\/a>"],"description":""}]},{"id":"job","type":"instance","name":"job","source":"src\/BigQuery\/BigQueryClient.php#L331","description":"<p>Lazily instantiates a job. There are no network requests made at this\npoint. To see the operations that can be performed on a job please\nsee <a data-custom-type=\"bigquery\/job\">Google\\Cloud\\BigQuery\\Job<\/a>.<\/p>","examples":[{"caption":"","code":"$job = $bigQuery->job('myJobId');"}],"resources":[],"params":[{"name":"id","description":"<p>The id of the job to request.<\/p>","types":["string"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery\/job\">Google\\Cloud\\BigQuery\\Job<\/a>"],"description":""}]},{"id":"jobs","type":"instance","name":"jobs","source":"src\/BigQuery\/BigQueryClient.php#L368","description":"<p>Fetches jobs in the project.<\/p>","examples":[{"caption":"<p>Get all jobs with the state of 'done'<\/p>","code":"$jobs = $bigQuery->jobs([\n    'stateFilter' => 'done'\n]);\n\nforeach ($jobs as $job) {\n    echo $job->id() . PHP_EOL;\n}"}],"resources":[{"title":"Jobs list API documentation.","link":"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/v2\/jobs\/list"}],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.allUsers","description":"<p>Whether to display jobs owned by all users in the project. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["bool"],"optional":null,"nullable":null},{"name":"options.maxResults","description":"<p>Maximum number of results to return per page.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.resultLimit","description":"<p>Limit the number of results returned in total. <strong>Defaults to<\/strong> <code>0<\/code> (return all results).<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.pageToken","description":"<p>A previously-returned page token used to resume the loading of results from a specific point.<\/p>","types":["string"],"optional":null,"nullable":null},{"name":"options.stateFilter","description":"<p>Filter for job state. Maybe be either <code>done<\/code>, <code>pending<\/code>, or <code>running<\/code>.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"cloud-core\/v1.5.0\/core\/iterator\/itemiterator\">Google\\Cloud\\Core\\Iterator\\ItemIterator<\/a>&lt;<a data-custom-type=\"bigquery\/job\">Google\\Cloud\\BigQuery\\Job<\/a>&gt;"],"description":""}]},{"id":"dataset","type":"instance","name":"dataset","source":"src\/BigQuery\/BigQueryClient.php#L406","description":"<p>Lazily instantiates a dataset. There are no network requests made at this\npoint. To see the operations that can be performed on a dataset please\nsee <a data-custom-type=\"bigquery\/dataset\">Google\\Cloud\\BigQuery\\Dataset<\/a>.<\/p>","examples":[{"caption":"","code":"$dataset = $bigQuery->dataset('myDatasetId');"}],"resources":[],"params":[{"name":"id","description":"<p>The id of the dataset to request.<\/p>","types":["string"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery\/dataset\">Google\\Cloud\\BigQuery\\Dataset<\/a>"],"description":""}]},{"id":"datasets","type":"instance","name":"datasets","source":"src\/BigQuery\/BigQueryClient.php#L443","description":"<p>Fetches datasets in the project.<\/p>","examples":[{"caption":"","code":"$datasets = $bigQuery->datasets();\n\nforeach ($datasets as $dataset) {\n    echo $dataset->id() . PHP_EOL;\n}"}],"resources":[{"title":"Datasets list API documentation.","link":"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/v2\/datasets\/list"}],"params":[{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.all","description":"<p>Whether to list all datasets, including hidden ones. <strong>Defaults to<\/strong> <code>false<\/code>.<\/p>","types":["bool"],"optional":null,"nullable":null},{"name":"options.maxResults","description":"<p>Maximum number of results to return per page.<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.resultLimit","description":"<p>Limit the number of results returned in total. <strong>Defaults to<\/strong> <code>0<\/code> (return all results).<\/p>","types":["int"],"optional":null,"nullable":null},{"name":"options.pageToken","description":"<p>A previously-returned page token used to resume the loading of results from a specific point.<\/p>","types":["string"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"cloud-core\/v1.5.0\/core\/iterator\/itemiterator\">Google\\Cloud\\Core\\Iterator\\ItemIterator<\/a>&lt;<a data-custom-type=\"bigquery\/dataset\">Google\\Cloud\\BigQuery\\Dataset<\/a>&gt;"],"description":""}]},{"id":"createDataset","type":"instance","name":"createDataset","source":"src\/BigQuery\/BigQueryClient.php#L488","description":"<p>Creates a dataset.<\/p>","examples":[{"caption":"","code":"$dataset = $bigQuery->createDataset('aDataset');"}],"resources":[{"title":"Datasets insert API documentation.","link":"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/v2\/datasets\/insert"}],"params":[{"name":"id","description":"<p>The id of the dataset to create.<\/p>","types":["string"],"optional":false,"nullable":null},{"name":"options","description":"<p>Configuration options.<\/p>","types":["array"],"optional":true,"nullable":null},{"name":"options.metadata","description":"<p>The available options for metadata are outlined at the <a href=\"https:\/\/cloud.google.com\/bigquery\/docs\/reference\/v2\/datasets#resource\">Dataset Resource API docs<\/a><\/p>","types":["array"],"optional":null,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery\/dataset\">Google\\Cloud\\BigQuery\\Dataset<\/a>"],"description":""}]},{"id":"bytes","type":"instance","name":"bytes","source":"src\/BigQuery\/BigQueryClient.php#L522","description":"<p>Create a Bytes object.<\/p>","examples":[{"caption":"","code":"$bytes = $bigQuery->bytes('hello world');"}],"resources":[],"params":[{"name":"value","description":"<p>The bytes value.<\/p>","types":["string","resource","\\Psr\\Http\\Message\\StreamInterface"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery\/bytes\">Google\\Cloud\\BigQuery\\Bytes<\/a>"],"description":""}]},{"id":"date","type":"instance","name":"date","source":"src\/BigQuery\/BigQueryClient.php#L538","description":"<p>Create a Date object.<\/p>","examples":[{"caption":"","code":"$date = $bigQuery->date(new \\DateTime('1995-02-04'));"}],"resources":[],"params":[{"name":"value","description":"<p>The date value.<\/p>","types":["\\DateTimeInterface"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery\/date\">Google\\Cloud\\BigQuery\\Date<\/a>"],"description":""}]},{"id":"int64","type":"instance","name":"int64","source":"src\/BigQuery\/BigQueryClient.php#L555","description":"<p>Create an Int64 object. This can be used to work with 64 bit integers as\na string value while on a 32 bit platform.<\/p>","examples":[{"caption":"","code":"$int64 = $bigQuery->int64('9223372036854775807');"}],"resources":[],"params":[{"name":"value","description":"<p>The 64 bit integer value in string format.<\/p>","types":["string"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"cloud-core\/v1.5.0\/core\/int64\">Google\\Cloud\\Core\\Int64<\/a>"],"description":""}]},{"id":"time","type":"instance","name":"time","source":"src\/BigQuery\/BigQueryClient.php#L571","description":"<p>Create a Time object.<\/p>","examples":[{"caption":"","code":"$time = $bigQuery->time(new \\DateTime('12:15:00.482172'));"}],"resources":[],"params":[{"name":"value","description":"<p>The time value.<\/p>","types":["\\DateTimeInterface"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery\/time\">Google\\Cloud\\BigQuery\\Time<\/a>"],"description":""}]},{"id":"timestamp","type":"instance","name":"timestamp","source":"src\/BigQuery\/BigQueryClient.php#L587","description":"<p>Create a Timestamp object.<\/p>","examples":[{"caption":"","code":"$timestamp = $bigQuery->timestamp(new \\DateTime('2003-02-05 11:15:02.421827Z'));"}],"resources":[],"params":[{"name":"value","description":"<p>The timestamp value.<\/p>","types":["\\DateTimeInterface"],"optional":false,"nullable":null}],"exceptions":[],"returns":[{"types":["<a data-custom-type=\"bigquery\/timestamp\">Google\\Cloud\\BigQuery\\Timestamp<\/a>"],"description":""}]}]}